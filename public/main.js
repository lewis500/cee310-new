"use strict";(self.webpackChunkcee310_new=self.webpackChunkcee310_new||[]).push([[179],{8446:function(e,t,r){var n=r(7294),a=r(745),o=r(8105),i=r(920),l=r(9198),c=r(951),s=r(9655),u=r(6335),m=r(282),f=r(1739),d=function(e,t){var r=(0,n.useRef)(0);r.current=e,(0,n.useLayoutEffect)((function(){if(t){var e=0,n=(0,f.HT)((function(t){var n=(t-e)/1e3;e=t,r.current&&r.current(n)}));return function(){return n.stop()}}}),[t])},p=r(1933),h=r(4446),y=550,E=470,v=1e5/3600,g=1.25,x=.11,b=1/x,k=g/v,w=g/(x-k),S=.6*k,A=x,Z=1/A,j=S*(6e4/3600),O=j/(A-S),T=.15,M=105,P=[14.85,49.85],C=.68*g,N=p.Z.A400,L=h.Z.A400,I=r(7145),_=r.n(I),D=r(3170);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===W(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y,F,q,V,H,B,G,$,X,J,Q,ee,te,re,ne,ae,oe=(Y=b,F=w,function(e){return Math.max(Math.min(27.77777777777778,(e/Y-1)*F),0)}),ie=(q=Z,V=O,function(e){return Math.max(Math.min(16.666666666666668,(e/q-1)*V),0)}),le=(re=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(P,2),ne=re[0],ae=re[1],function(e){return e>=ne&&e<=ae}),ce=[{t:0,a:0,d:0}],se=function(){for(var e=T,t=27.77777777777778/C,r=M/C,n=_()(0,r).map((function(e){return 550-e*t})),a=n.map((function(e){return[[0,e]]})),o=function(){var t=le(i),r=z(z({},ce[ce.length-1]),{},{t:i});n=n.map((function(n,a,o){var i=function(t,r,n){var a=t[r],o=0===r?1/0:t[r-1];return!n||a<=470?a+oe(o-a)*e:a+ie(o-a)*e}(o,a,t);return n<30&&i>30&&r.a++,n<500&&i>500&&r.d++,i}));for(var o=0;o<a.length;o++)a[o].push([i,n[o]]);ce.push(r)},i=0;i<M;i+=e)o();return a}(),ue=[{k:C/v,q:C,points:[[0,0],[0,y],Q=[(H=[P[0]+T,E])[0],y],H,J=[H[0]+(X=35*($=-(C-j)/(C/v-(G=x-j/w)))/(w-$)+35)+1,E-X*$],te=[J[0]+(y-J[0])/v,y],[M,y],[M,0],[0,0]]},{k:G,q:j,points:[H,B=[P[1],E],J,H]},{k:k,q:g,points:[B,J,te,ee=[B[0],y],B]},{k:S,q:j,points:[H,B,ee,Q]}],me=(se.map((function(e,t){return(0,D.Z)().domain(e.map((function(e){return e[0]}))).range(e.map((function(e){return e[1]})))})),se.map((function(e,t){return function(t,r){var n=e[t][1];return n+((e[t+1]?e[t+1][1]:e[t][1])-n)*r}}))),fe={play:!0,time:0,trafficState:[0,0],showState:!1},de=function(e,t){switch(t.type){case"SET_TIME":return z(z({},e),{},{time:t.payload});case"TICK":return z(z({},e),{},{time:e.time+t.payload});case"SET_PLAY":return z(z({},e),{},{play:t.payload});case"HIGHLIGHT":return z(z({},e),{},{showState:!0,trafficState:t.payload});case"HIDE":return z(z({},e),{},{showState:!1});case"RESET":return z(z({},e),{},{time:0});default:return e}},pe=n.createContext({state:fe,dispatch:null}),he=(r(4099),r(6479)),ye=r.n(he),Ee=r(7490),ve=function(e,t,r){return(0,n.useMemo)((function(){return(0,D.Z)().domain(t).range(e)}),r)};function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var be=function(e){var t=e.width,r=e.height,a=(0,n.useContext)(pe).state,o=ke({width:t,height:r}),i=ve([0,t],[0,y],[t]),l=ve([r,0],[0,20],[r]),c=ge((0,n.useMemo)((function(){return[i(E),r-l(10),i(5),r-l(2)]}),[i,l]),4),s=(c[0],c[1]),u=c[2],m=c[3],f=ge((0,n.useMemo)((function(){return["M0,0L".concat(t,",0")]}),[t]),1)[0],d=a.time/T,p=se.map((function(e,t){var r=Math.floor(d),n=d-r;return[t,me[t](r,n)]}));return n.createElement("g",null,n.createElement("path",{className:o.road,d:f,style:{strokeWidth:s}}),le(a.time)&&n.createElement("path",{className:o.cZone,d:"M".concat(i(E),",0L").concat(i(y),",0"),strokeWidth:s}),n.createElement("g",null,p.map((function(e,t){return n.createElement("rect",{key:e[0],className:o.car,transform:"translate(".concat(i(e[1])-u,",").concat(-m/2,")"),height:m,width:u})}))))},ke=(0,c.Z)({road:{stroke:Ee.BA[300]},car:{fill:Ee.jk.A400,rx:1,ry:1},text:{textAlign:"center",fontSize:"12px",fontFamily:"Puritan, sans-serif"},cZone:{stroke:Ee.Dz.A400}}),we=r(150),Se=r(8334),Ae=r(1755),Ze={fontSize:"12px"},je=n.memo((function(e){var t=e.x,r=e.y,a=e.dx,o=void 0===a?0:a,i=e.dy,l=void 0===i?0:i,c=e.rotate,s=void 0===c?0:c,u=e.latexstring,m=void 0===u?"":u;return n.createElement("foreignObject",{width:"80",height:"75",transform:"translate(".concat(t,", ").concat(r,") rotate(").concat(s,") translate(").concat(o,",").concat(l,")")},n.createElement("span",{style:Ze},n.createElement(Ae.Z,{math:m})))}));function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Oe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Oe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne,Le,Ie,_e,De="translate(".concat(25,",").concat(20,")"),We=function(){var e={strokeWidth:"2px",color:o.Z[800]};return function(t){var r=t.width,a=t.height;return n.createElement(n.Fragment,null,n.createElement("g",null,n.createElement("path",{d:"M0,0L0,".concat(a),fill:"none",stroke:"black",style:e,markerStart:"url(#arrow)"}),n.createElement(je,{x:-5,y:-25,latexstring:"x"})),n.createElement("g",{transform:"translate(0,".concat(a,")")},n.createElement("path",{d:"M0,0L".concat(r,",0"),fill:"none",stroke:"black",style:e,markerEnd:"url(#arrow)"}),n.createElement(je,{x:r-5,y:5,latexstring:"t"})))}}(),Re={mask:"url(#coverMask)"},ze=function(){var e={fill:"none",stroke:i.Z.A400,strokeWidth:"2px",pointerEvents:"none"};return n.memo((function(t){var r=t.tScale,a=t.xScale;return n.createElement("g",{style:Re},se.map((function(t,o){return(0,n.createElement)("path",{style:e,key:o,d:ye()(t.map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],o=t[1];return{x:r(n),y:a(o)}})),.2).reduce((function(e,t){return e+t.x+","+t.y+" "}),"M")})})))}))}(),Ke=(Le=Me(Me({},Ne={strokeWidth:"2px",stroke:L,fill:"none",strokeDasharray:"3,4",strokeLinecap:"round"}),{},{stroke:N}),Ie=Me(Me({},Ne),{},{stroke:Se.Z.A700}),_e=Me(Me({},Ne),{},{stroke:o.Z[500]}),n.memo((function(e){var t=e.xScale,r=e.tScale,a=e.width,o=e.height;return n.createElement("g",null,n.createElement("g",{transform:"translate(0,".concat(t(30),")")},n.createElement(je,{latexstring:"x_a",x:-22,y:-10}),(0,n.createElement)("path",Me(Me({},Le),{},{d:"M0,0L".concat(a,",0")}))),n.createElement("g",{transform:"translate(0,".concat(t(500),")")},n.createElement(je,{latexstring:"x_d",x:-22,y:-10}),(0,n.createElement)("path",Me(Me({},Ne),{},{d:"M0,0L".concat(a,",0")}))),n.createElement("g",{transform:"translate(0,".concat(t(E),")")},n.createElement(je,{latexstring:"x_{cz}",x:-22,y:-10}),(0,n.createElement)("path",Me(Me({},Ie),{},{d:"M0,0L".concat(a,",0")}))),n.createElement("g",{transform:"translate(".concat(r(14.85),",").concat(o,")")},n.createElement(je,{latexstring:"t_0",x:-2,y:0}),(0,n.createElement)("path",Me(Me({},_e),{},{d:"M0,0L".concat(0,",",-o)}))),n.createElement("g",{transform:"translate(".concat(r(P[1]),",").concat(o,")")},n.createElement(je,{latexstring:"t_1",x:-2,y:0}),(0,n.createElement)("path",Me(Me({},_e),{},{d:"M0,0L".concat(0,",",-o)}))))}))),Ue=n.createElement("defs",null,n.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"2",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",fill:"black"},n.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),Ye=function(e){var t=e.width,r=e.height,a=Fe({width:t,height:r});t=t-25-10,r=r-25-20;var o=(0,n.useContext)(pe),i=o.state,l=o.dispatch,c=ve([r,0],[0,y],[r]),s=ve([0,t],[0,M],[t]),u=(0,n.useMemo)((function(){return n.createElement("g",{mask:"url(#coverMask)"},ue.map((function(e){return n.createElement("path",{className:a.trafficState,key:e.k,onMouseOver:function(){l({type:"HIGHLIGHT",payload:[e.k,e.q]})},onMouseOut:function(){l({type:"HIDE"})},d:e.points.reduce((function(e,t){return e+s(t[0])+","+c(t[1])+" "}),"M")+"Z"})})))}),[t,r]);return n.createElement("svg",{className:a.svg},Ue,n.createElement("g",{transform:De},n.createElement("mask",{id:"myMask"},n.createElement("rect",{height:r,width:t,fill:"white",stroke:"none"})),u,n.createElement("g",{style:{mask:"url(#myMask)"}},n.createElement(ze,{tScale:s,xScale:c}),n.createElement("rect",{x:s(i.time),width:t-s(i.time),height:r,fill:"white"}),n.createElement("g",{transform:"translate(".concat(s(i.time),",").concat(r,") rotate(-90)")},n.createElement(be,{height:30,width:r}))),n.createElement(Ke,{xScale:c,width:t,tScale:s,height:r}),n.createElement(We,{width:t,height:r})))},Fe=(0,c.Z)((0,we.Z)({svg:function(e){return{width:e.width,height:e.height,"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}}},trafficState:{fill:l.Z[200],opacity:0,"&:hover":{opacity:.2}},hidden:{fill:"white",opacity:0},marker:{fill:i.Z.A700}})),qe=r(8920),Ve=n.memo((function(){return n.createElement("defs",null,n.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"2",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",fill:"black"},n.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})))})),He="translate(".concat(20,",").concat(20,")"),Be=(0,qe.Z)({rect:{rx:1,ry:1,stroke:"none"},root:{fontSize:"15px"}})((function(e){var t=e.classes;return n.createElement("g",{transform:"translate(".concat(12,",",5,")")},n.createElement("g",{transform:"translate(0,5)"},n.createElement("rect",{className:t.rect,width:10,height:2,style:{fill:L}}),n.createElement("text",{x:15,y:4,className:t.root},"cumulative departures")),n.createElement("g",{transform:"translate(0,25)"},n.createElement("rect",{className:t.rect,width:10,height:2,style:{fill:N}}),n.createElement("text",{x:15,y:4,className:t.root},"cumulative arrivals")))})),Ge=function(){var e={strokeWidth:"2px",color:o.Z[800]};return function(t){var r=t.width,a=t.height;return n.createElement(n.Fragment,null,n.createElement("g",null,n.createElement("path",{d:"M0,0L0,".concat(a),fill:"none",stroke:"black",style:e,markerStart:"url(#arrow)"}),n.createElement(je,{x:-10,y:-25,latexstring:"veh"})),n.createElement("g",{transform:"translate(0,".concat(a,")")},n.createElement("path",{d:"M0,0L".concat(r,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",style:e}),n.createElement(je,{x:r-5,y:5,latexstring:"t"})))}}(),$e=function(e){var t=e.width,r=e.height,a=(0,n.useContext)(pe).state,o=Xe({width:t,height:r});t=t-20-10;var i=ve([r=r-20-20,0],[0,C*M],[r]),l=ve([0,t],[0,M],[t]),c=(0,n.useMemo)((function(){return"M"+ce.map((function(e){return[l(e.t),i(e.d)]}))}),[t,r]),s=(0,n.useMemo)((function(){return"M"+ce.map((function(e){return[l(e.t),i(e.a)]}))}),[t,r]);return n.createElement("svg",{className:o.svg},n.createElement(Ve,null),n.createElement("g",{transform:He},n.createElement("mask",{id:"coverMask-cum"},n.createElement("rect",{width:l(a.time),height:r,fill:"white"})),n.createElement(Be,null),n.createElement("g",{mask:"url(#coverMask-cum)"},n.createElement("path",{className:o.aPath,d:s}),n.createElement("path",{className:o.dPath,d:c})),n.createElement(Ge,{width:t,height:r})))},Xe=(0,c.Z)({dot:{fill:l.Z[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},aPath:{stroke:N,fill:"none",strokeWidth:2},dPath:{stroke:L,fill:"none",strokeWidth:2},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:function(e){return{width:e.width,height:e.height,"& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}}},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},text:{textAlign:"center",fontSize:"10px"}}),Je=r(4845),Qe=r(2543),et=r(1120),tt=r(6037),rt=r(553),nt=r(9570),at=r(9895),ot=r(8397),it=r(9791),lt=r(9546);function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ut=(0,qe.Z)({rect:{rx:1,ry:1,stroke:"none"},root:{fontSize:"15px"}})((function(e){var t=e.classes,r=e.width;return n.createElement("g",{transform:"translate(".concat(r-150,",",5,")")},n.createElement("g",{transform:"translate(0,5)"},n.createElement("rect",{className:t.rect,width:10,height:2,style:{fill:i.Z.A700}}),n.createElement("text",{x:15,y:4,className:t.root},"regular F.D.")),n.createElement("g",{transform:"translate(0,25)"},n.createElement("rect",{className:t.rect,width:10,height:2,style:{fill:ot.Z.A400}}),n.createElement("text",{x:15,y:4,className:t.root},"construction zone F.D.")))})),mt=function(e){var t=e.width,r=e.height,a=(0,n.useContext)(pe).state,o=ft({width:t,height:r});r-=40;var l=ve([0,t-=30],[0,1.1*x],[t]),c=ve([r,0],[0,1.1*g],[r]),s=(0,n.useMemo)((function(){var e="M"+[[0,0],[k,g],[x,0]].map((function(e){var t=ct(e,2),r=t[0],n=t[1];return[l(r),c(n)]})).join("L");return n.createElement("path",{className:o.path,d:e,stroke:i.Z.A700})}),[t,r]),u=(0,n.useMemo)((function(){var e="M"+[[0,0],[S,j],[A,0]].map((function(e){var t=ct(e,2),r=t[0],n=t[1];return[l(r),c(n)]})).join("L");return n.createElement("path",{className:o.path,d:e,stroke:ot.Z.A400})}),[t,r]);return n.createElement("svg",{className:o.svg},n.createElement(Ve,null),n.createElement("g",{transform:"translate(".concat(20,",").concat(20,")")},n.createElement("mask",{id:"myMask4"},n.createElement("rect",{width:t,height:r,fill:"white"})),n.createElement(ut,{width:t}),n.createElement("g",{mask:"url(#myMask4)"},s,u,a.showState&&n.createElement("circle",{cx:l(a.trafficState[0]),cy:c(a.trafficState[1]),className:o.dot,r:6})),n.createElement("g",{id:"g-qaxis"},n.createElement("path",{d:"M0,0L0,".concat(r),fill:"none",stroke:"black",className:o.axis,markerStart:"url(#arrow)"}),n.createElement(je,{x:10,y:-15,latexstring:"q \\; (\\text{veh/min})"})),n.createElement("g",{transform:"translate(0,".concat(r,")"),id:"g-kaxis"},n.createElement("path",{d:"M0,0L".concat(t,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:o.axis}),n.createElement(je,{x:t-70,y:3,latexstring:"k \\; \\text{(veh/km)}"}))))},ft=(0,c.Z)({dot:{fill:l.Z[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"2px",fill:"none",opacity:.8},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:function(e){return{width:e.width,height:e.height}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}});function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ht,yt,Et,vt=(0,Qe.Z)((function(){return{root:{color:l.Z.A400,marginBottom:"5px"}}}))(Je.Z),gt={},xt=function(){var e=(0,n.useContext)(pe),t=e.state,r=e.dispatch,a=t.play,o=kt(gt);d((function(e){r({type:"TICK",payload:e*=6})}),a),t.time>M&&r({type:"RESET"});var i=dt(n.useState(!1),2),l=i[0],c=i[1];return n.createElement("div",{className:o.main},n.createElement(rt.Z,{control:n.createElement(nt.Z,{checked:l,onChange:function(){c((function(e){return!e}))}}),label:"show video"}),n.createElement(tt.Z,{in:l},n.createElement(at.Z,{elevation:2},n.createElement("div",{style:{width:640,height:497}},n.createElement("iframe",{width:"640",height:"497",src:"https://www.loom.com/embed/cc20ab7d23dd48109c4d2d50c5f57ace",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))),n.createElement("div",{style:{display:"flex",marginTop:"10px"}},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.createElement(Ye,{width:700,height:350}),n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},n.createElement(m.Z,{className:o.button,variant:"contained",color:"secondary",onClick:function(){return r({type:"SET_PLAY",payload:!a})}},a?"PAUSE":"PLAY"),n.createElement(m.Z,{className:o.button,variant:"contained",color:"secondary",onClick:function(){r({type:"RESET"})}},"Reset"),n.createElement("div",{style:{flex:"1 1 auto",padding:"0 20px"}},n.createElement("div",{className:o.sliderLabel,style:{marginTop:15}},"time ",n.createElement(Ae.Z,{math:"t"})),n.createElement(vt,{component:"div",onChange:function(e,t){return r({type:"SET_TIME",payload:t})},value:t.time,step:.525,min:0,max:M})))),n.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.createElement("div",null,n.createElement($e,{width:400,height:350})),n.createElement("div",null,n.createElement(mt,{width:400,height:250})))))},bt=function(){var e=dt((0,n.useReducer)(de,fe),2),t=e[0],r=e[1];return n.createElement(pe.Provider,{value:{state:t,dispatch:r}},n.createElement(xt,null))},kt=(0,et.Z)({sliderLabel:{fontSize:"14px",marginTop:"5px"},main:{color:o.Z[800],margin:"auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",marginTop:"-15px"},paper:{maxWidth:"500px",display:"flex",padding:"20px",flexDirection:"column",alignItems:"center"},button:{margin:"5px",width:"100px"},visContainer:{margin:"0 auto"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),wt=r(2318),St=r(3581),At=3,Zt=1.2,jt=75,Ot=3.4,Tt=.75,Mt=r(6984),Pt=r(6230),Ct={},Nt=(0,c.Z)({road:{fill:o.Z[200],stroke:"none"},svg:{display:"inline-block","& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},text:{textAlign:"center",fontSize:"12px",fontFamily:"Puritan, sans-serif"},xssd:{stroke:Se.Z.A400,strokeWidth:"2px"}}),Lt=87.5,It=(0,D.Z)().range([0,700]).domain([jt,-20]),_t={green:Se.Z.A700,red:St.Z.A200,yellow:Mt.Z[700]},Dt=It(0),Wt=Dt-It(8),Rt=Dt-It(At),zt=Dt-It(Zt),Kt=Wt/2,Ut=(0,n.createElement)("g",{},(0,n.createElement)("rect",{height:Wt,width:700,x:0,y:Lt-Kt,stroke:"none",fill:o.Z[200]}),(0,n.createElement)("rect",{height:175,width:Wt,x:Dt,y:0,stroke:"none",fill:o.Z[200]})),Yt=(0,qe.Z)({car:{fill:it.Z.A200,rx:1,ry:1},violated:{extend:"car",fill:St.Z.A400}})((function(e){var t=e.x,r=e.y,a=e.violation,o=e.classes;return n.createElement("rect",{width:Rt,height:zt,className:a?o.violated:o.car,y:Lt+r-4,x:t-Rt})})),Ft=function(e){var t=e.color;return(0,n.createElement)("line",{x1:Dt,x2:Dt,y1:Lt-Kt,y2:Lt+Kt,strokeWidth:6,stroke:t})},qt=(ht=(0,n.createElement)("line",{x1:0,x2:0,y1:0,y2:Kt-10,stroke:o.Z[500],strokeWidth:"2px",markerStart:"url(#arrow3)"}),yt=(0,n.createElement)("line",{x1:0,x2:0,y1:Kt+11,y2:Wt,stroke:o.Z[500],strokeWidth:"2px",markerEnd:"url(#arrow3)"}),Et=n.createElement("foreignObject",{width:"30",height:"30",y:Kt-11,x:"-7"},n.createElement(Ae.Z,{math:"x_0"})),function(e){var t=e.x;return n.createElement("g",{transform:"translate(".concat(t,",").concat(Lt-Kt,")")},ht,yt,Et)}),Vt=function(){var e=n.createElement("foreignObject",{width:"40",height:"50",x:"-8",y:"2"},n.createElement(Ae.Z,null,"x_{\\text{ssd}} "));return function(t){var r=t.x,a=t.classes;return n.createElement("g",{transform:"translate(".concat(r,",").concat(Lt+Kt+3,")")},r>45&&n.createElement("foreignObject",{width:"40",height:"45",x:-r/2-20,y:6},n.createElement("div",{className:a.text},"CAN STOP")),n.createElement("foreignObject",{width:"40",height:"45",x:(Dt-r)/2-20,y:6},n.createElement("div",{className:a.text},"CAN'T STOP")),e,(0,n.createElement)("line",{markerStart:"url(#arrow)",stroke:Pt.Z[400],strokeWidth:2,x2:-r,x1:0}),(0,n.createElement)("line",{markerStart:"url(#arrow3)",markerEnd:"url(#arrow3)",stroke:o.Z[400],strokeWidth:2,strokeDasharray:"2 2",x2:Dt-r,x1:0}))}}(),Ht=function(){var e=n.createElement("foreignObject",{width:"30",height:"30",x:"-8",y:"-30"},n.createElement(Ae.Z,null,"x_{\\text{cl}} "));return function(t){var r=t.x,a=t.classes;return n.createElement("g",{transform:"translate(".concat(r,",").concat(Lt-Kt-3,")")},e,n.createElement("foreignObject",{width:"45",height:"45",x:Dt/2-r/2-20,y:-35},n.createElement("div",{className:a.text},"CAN CLEAR")),n.createElement("foreignObject",{width:"45",height:"45",x:-r/2-20,y:-35},n.createElement("div",{className:a.text},"CAN'T CLEAR")),(0,n.createElement)("line",{markerEnd:"url(#arrow2)",markerStart:"url(#arrow2)",stroke:lt.Z.A400,strokeWidth:2,x2:0,x1:Dt-r}),(0,n.createElement)("line",{markerEnd:"url(#arrow3)",stroke:o.Z[400],strokeWidth:2,strokeDasharray:"2,2",x2:0,x1:-r}))}}(),Bt=r(3838),Gt=r(4752),$t=r(845);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Xt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Xt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tr={play:!0,v0:18,x0:56.25,stopper:{x:jt,v:18},mover:{x:jt,v:18},time:0,useState:2,yellow:2.5},rr=function(e,t,r,n){var a=e.x,o=e.v,i=t.payload,l=i.xssd,c=i.dt;return a<Math.min(l,n)-r*Tt?{v:Math.max(o-Ot*c,0),x:Math.min(a-o*c+1.7*c*c,a)}:{v:o,x:a-o*c}},nr=function(e,t){switch(t.type){case"TICK":var r=t.payload.dt,n=e.mover,a=e.stopper,o=e.v0,i=e.x0;return Qt(Qt({},e),{},{time:e.time+r,mover:{v:n.v,x:n.x-n.v*r},stopper:rr(a,t,o,i)});case"SET_X0":return Qt(Qt({},e),{},{x0:t.payload});case"SET_PLAY":return Qt(Qt({},e),{},{play:t.payload});case"SET_YELLOW":return Qt(Qt({},e),{},{yellow:t.payload});case"SET_V0":return Qt(Qt({},e),{},{v0:t.payload});case"RESTART":return Qt(Qt({},e),{},{mover:{v:e.v0,x:jt},time:0,stopper:{v:e.v0,x:jt}});case"DRAG":return Qt(Qt({},e),{},{v0:t.payload.v0,x0:t.payload.x0});case"RESET":return Qt(Qt({},e),{},{play:!1,time:0,mover:{v:e.v0,x:jt},stopper:{v:e.v0,x:jt}});default:return e}},ar=n.createContext({state:tr,dispatch:null}),or=(0,$t.Z)((function(e){return e*Tt+e*e/2/Ot})),ir=(0,$t.Z)((function(e,t){return e*t-At})),lr=r(993),cr=r(4497),sr=r(2067),ur=400,mr=800/3,fr=(0,c.Z)({svg:{width:450,height:316.6666666666667,"& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"},"& .katex":{fontSize:"13px"}},math:{fontSize:"10px"},dot:{stroke:"white",strokeWidth:3,fill:l.Z[500],cursor:"pointer"},path:{},xssd:{strokeWidth:2,fill:"none",stroke:Pt.Z[400]},xcl:{strokeWidth:2,fill:"none",stroke:lt.Z.A400},dz:{fill:l.Z.A200,opacity:.3,stroke:"none"},hidden:{fill:"white",opacity:0}}),dr=(0,D.Z)().domain([0,jt]).range([mr,0]),pr=(0,D.Z)().domain([0,21]).range([0,ur]),hr=(0,Gt.y4)(dr),yr=(0,Gt.LL)(pr),Er=(0,$t.Z)((function(e,t){return"translate(".concat(e,",").concat(t,")")})),vr=Array.apply(null,{length:80}).map((function(e,t){return t})),gr="M"+vr.map((function(e){return[pr(e),dr(Tt*e+e*e/2/Ot)]})).join("L"),xr=(0,$t.Z)((function(e){return"M"+vr.map((function(t){return[pr(t),dr(t*e-At)]})).join("L")})),br=(0,cr.Z)().x((function(e){return pr(e[0])})).y0((function(e){return dr(e[2])})).y1((function(e){return dr(Math.max(e[1],e[2]))})),kr=(0,$t.Z)((function(e){return br(vr.map((function(t){return[t,Tt*t+t*t/2/Ot,t*e-At]})))})),wr=(0,qe.Z)({rect:{rx:1,ry:1,stroke:"none"},xssd:{fill:Pt.Z[400]},xcl:{fill:lt.Z.A400},dz:{fill:l.Z.A200,opacity:.3,stroke:"none"}})((function(e){var t=e.classes;return n.createElement("g",{transform:"translate(".concat(12,",",30,")")},n.createElement("g",null,n.createElement("rect",{className:t.xssd,width:10,height:10}),n.createElement(je,{latexstring:"x_{\\text{ssd}}",x:15,y:-7})),n.createElement("g",{transform:"translate(0,20)"},n.createElement("rect",{className:t.xcl,width:10,height:10}),n.createElement(je,{latexstring:"x_{\\text{cl}}",x:15,y:-7})),n.createElement("g",{transform:"translate(0,40)"},n.createElement("rect",{className:t.dz,width:10,height:10}),n.createElement("text",{x:15,y:9},"dilemma zone")))})),Sr=function(){var e=fr({}),t=(0,n.useRef)(),r=(0,n.useRef)(),a=((0,n.useRef)(),(0,n.useRef)()),o=(0,n.useContext)(ar),i=o.state,l=o.dispatch,c=i.v0,s=i.x0,u=(0,n.useRef)(l);return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(t.current).call(hr),(0,Bt.Z)(r.current).call(yr);var e=(0,lr.Z)().on("drag",(function(e){u.current({type:"DRAG",payload:{x0:dr.invert(e.y),v0:pr.invert(e.x)}})}));(0,Bt.Z)(a.current).call(e)}),[]),(0,n.useLayoutEffect)((function e(){(0,Bt.Z)(a.current).transition().ease(sr._e).duration(400).attr("r",7).transition().ease(sr.tw).duration(400).attr("r",5).on("end",e)}),[]),n.createElement("svg",{className:e.svg},n.createElement("g",{transform:Er(40,10)},n.createElement("mask",{id:"myMask"},n.createElement("rect",{width:ur,height:mr,fill:"white"})),n.createElement("rect",{className:e.hidden,width:ur,height:mr}),n.createElement("g",{ref:t}),n.createElement("g",{ref:r,transform:Er(0,mr)}),n.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(10,",",0,")")},n.createElement("span",{className:e.math},n.createElement(Ae.Z,{math:"x \\; \\text{(m)}"}))),n.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(352,",").concat(mr-20,")")},n.createElement("span",{className:e.math},n.createElement(Ae.Z,{math:"v_0 \\; \\text{(m/s)}"}))),n.createElement("path",{d:kr(i.yellow),className:e.dz,mask:"url(#myMask)"}),n.createElement("path",{d:gr,className:e.xssd,mask:"url(#myMask)"}),n.createElement("path",{d:xr(i.yellow),className:e.xcl,mask:"url(#myMask)"}),n.createElement("circle",{ref:a,className:e.dot,transform:"translate(".concat(pr(c),",").concat(dr(s),")")}),n.createElement(wr,null)))};function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jr=(0,c.Z)({main:{color:o.Z[800],margin:"0 auto",marginTop:10,boxSizing:"border-box",display:"flex",flexDirection:"row",justifyContent:"center"},column:{flexDirection:"column",display:"flex",alignItems:"center",marginTop:-15},red:{fill:St.Z.A400},button:{},visContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingRight:"30px"}}),Or=function(){var e=(0,Qe.Z)((function(e){return{root:{color:e.palette.secondary.main,marginBottom:"15px"}}}))(Je.Z),t=n.createElement(wt.Z,{variant:"body1"},n.createElement(Ae.Z,{math:"x_0"})," (position when light turns green → yellow)"),r=n.createElement(wt.Z,{variant:"body1"},n.createElement(Ae.Z,{math:"v_0"})," (speed when light changes green → yellow)"),a=n.createElement(wt.Z,{variant:"body1"},n.createElement(Ae.Z,{math:"t_y"})," (yellow light duration)");return function(){var o=(0,n.useContext)(ar),i=o.state,l=o.dispatch,c=i.x0,s=i.v0,u=i.yellow;return n.createElement(n.Fragment,null,t,n.createElement(e,{onChange:function(e,t){return l({type:"SET_X0",payload:t})},value:c,step:.02,min:0,max:jt}),r,n.createElement(e,{onChange:function(e,t){return l({type:"SET_V0",payload:t})},value:s,step:.1,min:0,max:21}),a,n.createElement(e,{onChange:function(e,t){return l({type:"SET_YELLOW",payload:t})},value:u,step:.02,min:0,max:3.5}))}}(),Tr={},Mr=function(){var e=(0,n.useContext)(ar),t=e.state,r=e.dispatch,a=t.x0,i=t.v0,l=t.stopper,c=t.mover,s=t.time,u=t.play,f=t.yellow,p=jr(Tr),h=or(i),y=ir(i,f);d((function(e){e/=.6,c.x>-20||l.v>0?r({type:"TICK",payload:{dt:e,xssd:h}}):setTimeout((function(){r({type:"RESTART"})}),0)}),u);var E=Ar(n.useState(!1),2),v=E[0],g=E[1];return n.createElement("div",{className:p.column},n.createElement(rt.Z,{control:n.createElement(nt.Z,{checked:v,onChange:function(){g((function(e){return!e}))}}),label:"show video"}),n.createElement(tt.Z,{in:v},n.createElement(at.Z,{elevation:2},n.createElement("div",{style:{width:640,height:380}},n.createElement("iframe",{width:"640",height:"380",src:"https://www.loom.com/embed/6d75a58ac2384ed5bdf13801cb055660",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))),n.createElement("div",{className:p.main},n.createElement("div",{className:p.visContainer},n.createElement("div",{style:{marginBottom:"30px"}},function(e){var t=e.mover,r=e.stopper,a=e.x0,i=e.lightColor,l=e.xssd,c=e.xcl,s=Nt(Ct);return n.createElement("svg",{width:700,height:175,className:s.svg},n.createElement("defs",null,n.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:Pt.Z[400]},n.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),n.createElement("marker",{id:"arrow2",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:lt.Z.A400},n.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),n.createElement("marker",{id:"arrow3",viewBox:"0 0 15 15",refY:"5",refX:"8",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",fill:o.Z[400]},n.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),n.createElement("g",null,Ut,n.createElement(qt,{x:It(a),classes:s}),n.createElement(Vt,{x:It(l),classes:s}),n.createElement(Ht,{x:It(c),classes:s}),n.createElement(Ft,{color:_t[i],classes:s}),n.createElement(Yt,{x:It(t.x),y:-15,violation:t.x<-1&&a>c}),n.createElement(Yt,{x:It(r.x),y:15,violation:r.x<-1})))}({mover:c,stopper:l,xcl:y,x0:a,lightColor:s<(jt-a)/i?"green":s-(jt-a)/i<f?"yellow":"red",xssd:h})),n.createElement(Sr,null)),n.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.createElement(Or,null),n.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},n.createElement(m.Z,{className:p.button,variant:"contained",color:"secondary",onClick:function(){return r({type:"SET_PLAY",payload:!u})}},u?"PAUSE":"PLAY"),n.createElement(m.Z,{className:p.button,variant:"contained",color:"secondary",component:"div",onClick:function(){r({type:"RESET"})}},"Reset")),n.createElement("div",null))))},Pr=function(){var e=Ar((0,n.useReducer)(nr,tr),2),t=e[0],r=e[1];return n.createElement(ar.Provider,{value:{state:t,dispatch:r}},n.createElement(Mr,null))},Cr=100,Nr=r(573),Lr=r(3422),Ir=r.n(Lr);function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_r(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ur={play:!0,x:0,v:20,v0:20,time:0,R:80,"Δ":60,Ms:8,braking:!1,flowCount:0},Yr=function(e){return e.TICK="TICK",e.SET_V0="SET_V0",e.SET_R="SET_R",e.SET_PLAY="SET_PLAY",e.RESET="RESET",e.RESTART="RESTART",e["SET_Δ"]="SET_Δ",e.SET_X="SET_X",e.SET_MS="SET_MS",e}({}),Fr=(0,Nr.P1)([Ir()("Δ")],(function(e){return e/180*Math.PI/2})),qr=((0,Nr.P1)([Ir()("R"),Fr],(function(e,t){return 2*e*Math.sin(t)})),(0,Nr.P1)([function(e,t){return t.width}],(function(e){return(0,D.Z)().domain([0,Cr]).range([0,e])}))),Vr=(0,Nr.P1)([qr,function(e,t){return t.height}],(function(e,t){return function(r){return t-e(r+90)}})),Hr=(0,Nr.P1)([Fr,Ir()("R")],(function(e,t){var r=2*t*Math.sin(e),n=(Cr-r)/2,a=Math.tan(e)*n,o=[50,a-Math.cos(e)*t];return{yKink:a,a:[0,0],b:[n,a],c:[n+r,a],d:[Cr,0],r:t,center:o,side:n,pvi:[50,50*Math.tan(e)],centerArc:[50,o[1]+t]}})),Br=(0,Nr.P1)([Hr,qr,Vr],(function(e,t,r){var n=e.a,a=e.b,o=e.c,i=e.d,l=e.r,c=e.center,s=e.pvi,u=e.centerArc,m=function(e){var n=zr(e,2),a=n[0],o=n[1];return[t(a),r(o)]};return{a:m(n),b:m(a),c:m(o),d:m(i),r:t(l),center:m(c),pvi:m(s),centerArc:m(u)}})),Gr=(0,Nr.P1)([Br],(function(e){var t=e.b,r=e.c,n=e.r;return"M"+t+"A ".concat(n," ").concat(n," 0 0 1 ").concat(r[0]," ").concat(r[1])})),$r=(0,Nr.P1)([Br],(function(e){return"M"+e.a+"L"+e.b+"M"+e.c+"L"+e.d})),Xr=(0,Nr.P1)([Br],(function(e){e.a;var t=e.b,r=e.c;return e.d,"M"+t+"L"+e.center+"L"+r})),Jr=(0,Nr.P1)([Fr,Hr],(function(e,t){var r=t.r;return 2*t.side/Math.cos(e)+r*e*2})),Qr=(0,Nr.P1)(Br,(function(e){var t=e.pvi;return"M"+e.b+"L"+t+"L"+e.c})),en=(0,Nr.P1)([Ir()("x"),Fr,Hr],(function(e,t,r){var n=r.side/Math.cos(t);if(e<n)return{loc:[e*Math.cos(t),e*Math.sin(t)],rotate:-t};var a=r.r*t*2;if(e-n<a){var o=(e-n)/r.r-t;return{loc:[r.center[0]+r.r*Math.sin(o),r.center[1]+r.r*Math.cos(o)],rotate:o}}return{loc:[Cr-(e=2*n+a-e)*Math.cos(t),e*Math.sin(t)],rotate:t}})),tn=(0,Nr.P1)([en,qr,Vr],(function(e,t,r){var n=zr(e.loc,2),a=n[0],o=n[1],i=e.rotate;return{loc:[t(a),r(o)],rotate:i/Math.PI*180}})),rn=(0,Nr.P1)([Ir()("Ms"),Hr],(function(e,t){var r=zr(t.center,2),n=r[0],a=r[1],o=t.r,i=Math.acos((o-e)/o);return{loc:[n+o*Math.sin(i),a+o-e],rotate:i}})),nn=(0,Nr.P1)([rn,qr,Vr],(function(e,t,r){var n=zr(e.loc,2),a=n[0],o=n[1],i=e.rotate;return{loc:[t(a),r(o)],rotate:i/Math.PI*180}})),an=(0,Nr.P1)([Ir()("Ms"),Hr],(function(e,t){var r=zr(t.center,2),n=r[0],a=r[1],o=t.r,i=t.centerArc,l=o*Math.sin(Math.acos((o-e)/o));return{chordStart:[n-l,o-e+a],chordEnd:[n+l,o-e+a],block:[n,o-e+a],centerArc:i}})),on=(0,Nr.P1)([an,qr,Vr],(function(e,t,r){var n=e.chordStart,a=e.chordEnd,o=e.block,i=e.centerArc,l=function(e){var n=zr(e,2),a=n[0],o=n[1];return[t(a),r(o)]};return{chordStart:l(n),chordEnd:l(a),block:l(o),centerArc:l(i)}})),ln=(0,Nr.P1)([on],(function(e){var t=e.block,r=e.centerArc;return{x:(t[0]+r[0])/2,y:(t[1]+r[1])/2}})),cn=(0,Nr.P1)([on],(function(e){var t=e.chordStart,r=e.chordEnd,n=e.block;return"M"+t+"L"+r+"M"+e.centerArc+"L"+n})),sn=(0,Nr.P1)([Ir()("Ms"),Hr,en],(function(e,t,r){var n=zr(t.center,2),a=n[0],o=(n[1],t.r),i=zr(r.loc,2),l=i[0],c=(i[1],Math.acos((o-e)/o));return l>a-o*Math.sin(c)})),un=function(e,t){switch(t.type){case Yr.TICK:var r=sn(e),n=t.payload;return Wr(Wr({},e),{},{v:r?e.v-3.4*n:e.v0,x:e.x+n*e.v+(r?-n*n*3.4*.5:0),time:e.time+n,braking:r});case Yr.SET_Δ:return Wr(Wr({},e),{},{"Δ":t.payload});case Yr.SET_MS:return Wr(Wr({},e),{},{Ms:t.payload});case Yr.SET_X:return Wr(Wr({},e),{},{x:t.payload});case Yr.SET_PLAY:return Wr(Wr({},e),{},{play:t.payload});case Yr.SET_V0:return Wr(Wr({},e),{},{v0:t.payload});case Yr.SET_R:return Wr(Wr({},e),{},{R:t.payload});case Yr.RESTART:return Wr(Wr({},e),{},{time:0,x:0,v:e.v0});case Yr.RESET:return Wr(Wr({},e),{},{play:!1,time:0,x:0,v:e.v0});default:return e}},mn=n.createContext({state:Ur,dispatch:null});function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dn=function(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}};function pn(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(dn(e?e.current:null)),2),r=t[0],a=t[1],o=(0,n.useCallback)((function(){return e.current&&a(dn(e.current))}),[e]);return(0,n.useLayoutEffect)((function(){if(e.current)return o(),window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}}),[e.current]),r}var hn=r(5442),yn=r(6010);function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}var vn={},gn=function(e,t,r,a){return n.createElement("g",{transform:"translate(".concat((t[0]+e[0])/2,", ").concat((t[1]+e[1])/2,") rotate(").concat(-a/2,")")},n.createElement("circle",{fill:"white",r:"12"}),n.createElement(je,{x:0,y:0,dx:-6,dy:-11,latexstring:"R"}))},xn=function(e){var t=e.x,r=e.y;return n.createElement("g",{transform:"translate(".concat(t-8,", ").concat(r-6,")")},n.createElement(je,{x:0,y:0,dx:-1,dy:-3,latexstring:"M_s"}))},bn=function(){var e,t,r,a=(0,n.useContext)(mn).state,o=kn(vn),i=(0,n.useRef)(),l=pn(i),c=Br(a,l),s=Fr(a);return n.createElement("div",{ref:i,className:o.container},n.createElement("svg",{className:o.svg},n.createElement("circle",{r:c.r,cx:c.center[0],cy:c.center[1],className:o.circle}),n.createElement("path",{d:Xr(a,l),className:o.hinge}),n.createElement("path",{d:$r(a,l),className:o.sides}),n.createElement("path",{d:Gr(a,l),className:o.arc}),n.createElement("path",{d:Gr(a,l),className:o.arc}),n.createElement("path",{d:Qr(a,l),className:o.tangents}),n.createElement("path",{d:cn(a,l),className:o.hinge}),n.createElement("rect",{className:(0,yn.Z)(o.car,(e={},t=o.braking,r=a.braking,(t=function(e){var t=function(e,t){if("object"!==En(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===En(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),width:8,height:5,transform:"translate(".concat(tn(a,l).loc,") rotate(").concat(tn(a,l).rotate,") translate(").concat(-4,",").concat(-2.5,")")}),n.createElement(xn,{x:ln(a,l).x,y:ln(a,l).y}),n.createElement("rect",{className:o.block,width:"20px",height:"20px",transform:"translate(".concat(on(a,l).block,") translate(").concat(-10,",",0,")")}),n.createElement("rect",{className:o.car,width:8,height:5,transform:"translate(".concat(nn(a,l).loc,") rotate(").concat(nn(a,l).rotate,") translate(",4,",").concat(-2.5,")")}),n.createElement(je,{x:c.center[0],y:c.center[1],dx:-6,dy:-50,rotate:0,latexstring:"\\Delta"}),n.createElement(je,{x:c.pvi[0],y:c.pvi[1],dx:-12,dy:-17,rotate:0,latexstring:"\\text{PVI}"}),n.createElement(je,{x:c.b[0],y:c.b[1],dx:-12,dy:-22,rotate:-a.Δ/2,latexstring:"\\text{PC}"}),n.createElement(je,{x:c.c[0],y:c.c[1],dx:-12,dy:-22,rotate:a.Δ/2,latexstring:"\\text{PT}"}),n.createElement("circle",{cx:c.pvi[0],cy:c.pvi[1],r:"2",className:o.pvi}),n.createElement("circle",{cx:c.b[0],cy:c.b[1],r:"2",className:o.pvi}),n.createElement("circle",{cx:c.c[0],cy:c.c[1],r:"2",className:o.pvi}),n.createElement("path",{d:"M".concat(c.center[0]+30*Math.sin(-s),",").concat(c.center[1]-30*Math.cos(-s)," A ",30," ",30," 0 0 1 ").concat(c.center[0]+30*Math.sin(s)," ").concat(c.center[1]-30*Math.cos(s),"\n          "),stroke:"black",strokeWidth:"1px",fill:"none"}),gn(c.center,c.b,c.r,a.Δ),gn(c.center,c.c,c.r,-a.Δ)))},kn=(0,c.Z)({laser:{fill:"none","stroke-width":12},sides:{extend:"laser",stroke:hn.Z[700]},tangents:{stroke:lt.Z.A200,strokeWidth:"1px",fill:"none",strokeDasharray:"2,2"},pvi:{stroke:"none",fill:lt.Z.A200},arc:{extend:"laser",stroke:i.Z[700]},circle:{extend:"laser",strokeWidth:"1px",stroke:Se.Z[500],strokeDasharray:"2,3"},hinge:{extend:"laser",stroke:l.Z.A700,fill:"none",strokeWidth:"1px",strokeDasharray:"2,3"},svg:{display:"block",width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},container:{position:"relative",width:"100%",height:"100%"},tangent:{stroke:l.Z.A700,strokeWidth:"2px",fill:"none"},connected:{stroke:l.Z.A200,strokeDasharray:"2, 2"},text:{textAlign:"center",fontSize:"12px",fontFamily:"Puritan, sans-serif"},car:{fill:it.Z[200],stroke:"white",rx:1.5,ry:1.5},braking:{fill:St.Z.A400},block:{fill:Se.Z.A700}}),wn=(0,Qe.Z)((function(e){return{root:{color:e.palette.primary.main,marginBottom:"15px"}}}))(Je.Z),Sn=function(){var e=(0,n.useContext)(mn),t=e.state,r=e.dispatch,a=(0,n.useMemo)((function(){return{"setΔ":function(e,t){return r({type:Yr["SET_Δ"],payload:t})},setR:function(e,t){return r({type:Yr.SET_R,payload:t})},setX:function(e,t){return r({type:Yr.SET_X,payload:t})},setMs:function(e,t){return r({type:Yr.SET_MS,payload:t})}}}),[]);return n.createElement(n.Fragment,null,n.createElement(wt.Z,{variant:"body1"},n.createElement(Ae.Z,{math:"M_s"})," object distance (m)"),n.createElement(wn,{onChange:a.setMs,value:t.Ms,step:.1,min:2,max:Hr(t).r-Hr(t).c[1]+Hr(t).center[1]-2}),n.createElement(wt.Z,{variant:"body1"},n.createElement(Ae.Z,{math:"R"})," radius (m)"),n.createElement(wn,{onChange:a.setR,value:t.R,step:1,min:70,max:90}))},An=r(4013),Zn=r(246),jn=r(4137),On=r(3064);function Tn(e,t){if(e){if("string"==typeof e)return Mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mn(e,t):void 0}}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pn,Cn=(0,An.Ue)({plugins:[].concat((Pn=(0,Zn.Z)().plugins,function(e){if(Array.isArray(e))return Mn(e)}(Pn)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Pn)||Tn(Pn)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[(0,On.Z)()])}),Nn=(0,c.Z)({main:{maxWidth:"900px",color:Ee.BA[800],margin:"0 auto",boxSizing:"border-box",display:"flex",alignItems:"center"},buttons:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},red:{fill:Ee.Q6.A400},paper:{maxWidth:"500px",width:300,display:"flex",padding:"24px 36px",flexDirection:"column"},button:{margin:"10px"},visContainer:{width:500,height:650},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),Ln={},In=function(){var e=(0,n.useContext)(mn),t=e.state,r=e.dispatch,a=Nn(Ln);return d((function(e){e/=.75,t.x<Jr(t)&&t.v>0?r({type:Yr.TICK,payload:e}):r({type:Yr.RESTART})}),t.play),n.createElement("div",{className:a.main},n.createElement("div",{className:a.visContainer},n.createElement(bn,null)),n.createElement("div",{className:a.paper},n.createElement(Sn,null),n.createElement("div",{className:a.buttons},n.createElement(m.Z,{className:a.button,variant:"contained",color:"secondary",onClick:function(){return r({type:Yr.SET_PLAY,payload:!t.play})}},t.play?"PAUSE":"PLAY"),n.createElement(m.Z,{className:a.button,variant:"contained",color:"secondary",onClick:function(){r({type:Yr.RESET})}},"Reset"))))},_n=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||Tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useReducer)(un,Ur),2),t=e[0],r=e[1];return n.createElement(mn.Provider,{value:{state:t,dispatch:r}},n.createElement(In,null))},Dn=function(){return n.createElement(jn.ZP,{jss:Cn},n.createElement(_n,null))},Wn=8e4/3600,Rn=(1+Math.sqrt(5))/2,zn=1*Rn*2.5,Kn=1/(2.5*Rn),Un=Kn/3,Yn=Wn*Un;function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){Hn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Fn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Fn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gn=Kn,$n=Wn,Xn=Yn/(Kn-Un),Jn=Un,Qn=Math.min,ea=Math.max,ta=function(e){return function(e){return function(e){if(Array.isArray(e))return Bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(e).keys())},ra=function(e){return e.TRIANGLE="TRIANGLE",e.GREENSHIELDS="GREENSHIELDS",e.DRAKE="DRAKE",e}({}),na=ta(21).map((function(e,t){return(t+1)/21*Gn})),aa={TRIANGLE:function(e){return ea(Qn($n,Xn*(Gn/e-1)),0)},GREENSHIELDS:function(e){return ea(0,$n*(1-e/Gn))},DRAKE:function(e){return ea(0,$n*Math.exp(-Math.pow(e/Jn,2)/2))}},oa=function(e){return na.map((function(t){return{k:t,s:1/t,v:aa[e](t),cars:ta(Math.round(140*t)).map((function(e){return e/t}))}}))},ia={play:!0,lanes:oa(ra.TRIANGLE),vk:ra.TRIANGLE},la=function(e){return e.TICK="TICK",e.SET_VK="SET_VK",e.SET_PLAY="SET_PLAY",e}({}),ca=function(e,t){switch(t.type){case la.TICK:var r=t.payload;return Vn(Vn({},e),{},{lanes:e.lanes.map((function(e){var t=e.cars.map((function(t){return t+r*e.v}));return t[0]>e.s&&t.unshift(t[0]-e.s),t[t.length-1]>140&&t.pop(),Vn(Vn({},e),{},{cars:t})}))});case la.SET_VK:return Vn(Vn({},e),{},{vk:t.payload,lanes:oa(t.payload)});case la.SET_PLAY:return Vn(Vn({},e),{},{play:t.payload});default:return e}},sa=(0,Nr.P1)([function(e){return e.vk}],(function(e){switch(e){case ra.GREENSHIELDS:return aa.GREENSHIELDS(Kn/2)*Kn/2;case ra.TRIANGLE:return Yn;default:return aa.DRAKE(Un)*Un}})),ua=n.createContext({state:ia,dispatch:null}),ma=(0,D.Z)().range([St.Z.A700,Se.Z.A700]).domain([0,Wn]),fa="translate(".concat(20,",").concat(25,")"),da=(0,$t.Z)((function(e,t,r){var a=(0,D.Z)().range([t,0]).domain([0,1.2*Wn]),o=(0,D.Z)().range([t,0]).domain([0,137.5]),i=(0,D.Z)().range([0,e]).domain([0,Kn+.008]),l=t-o(2.5),c=t-o(1),s=(0,n.createElement)("path",{className:r.road,strokeWidth:t-o(zn),d:"M0,0L0,".concat(t)});return{vScale:a,xScale:o,kScale:i,carLength:l,carWidth:c,Road:s}})),pa=function(e){var t=e.width,r=e.height,a=(0,n.useContext)(ua).state,o=aa[a.vk],i=ha({width:t+50+20,height:r+25+30}),l=da(t,r,i),c=l.vScale,s=l.xScale,u=l.kScale,m=l.carLength,f=l.carWidth,d=l.Road,p=(0,n.useMemo)((function(){return(0,n.createElement)("path",{className:i.path,d:ta(70).map((function(e,t,r){return e/(r.length-1)*Kn})).reduce((function(e,t){return e+u(t)+","+c(o(t))+" "}),"M")})}),[u,c,o]);return n.createElement("svg",{className:i.svg},n.createElement("g",{transform:fa},n.createElement("mask",{id:"myMask"},n.createElement("rect",{width:t,height:r,fill:"white"})),n.createElement("g",{mask:"url(#myMask)"},a.lanes.map((function(e,t){return n.createElement("g",{key:e.k,transform:"translate(".concat(u(e.k),",0)")},d,e.cars.map((function(t,r){return n.createElement("rect",{key:r,className:i.car,y:s(t),x:-f/2,height:m,fill:ma(o(e.k)),width:f})})))})),p),n.createElement("g",{id:"vaxis"},n.createElement("path",{d:"M0,0L0,".concat(r),fill:"none",stroke:"black",markerEnd:"url(#arrow)",markerStart:"url(#arrow)"}),n.createElement(je,{x:-20,y:c(Wn)-10,latexstring:"v_f"}),n.createElement(je,{x:-10,y:-25,latexstring:"v \\; \\text{(km/hr)}"})),n.createElement("g",{transform:"translate(0,".concat(r,")"),id:"kaxis"},n.createElement("path",{d:"M0,0L".concat(t,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)"}),n.createElement(je,{x:u(a.vk===ra.GREENSHIELDS?Kn/2:Un)-4,y:0,latexstring:"k_0"}),n.createElement(je,{x:u(Kn)-4,y:0,latexstring:"k_j"}),n.createElement(je,{x:t,y:-15,rotate:0,latexstring:"\\text{(veh/km)}"}))))},ha=(0,c.Z)({path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},road:{stroke:o.Z[300]},car:{rx:1,ry:1,stroke:"none"},svg:function(e){return{width:e.width,height:e.height,display:"block","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}}},text:{textAlign:"center",fontSize:"10px"}}),ya="translate(".concat(20,",").concat(25,")"),Ea=(0,n.memo)((function(e){var t=e.height,r=e.width,a=e.children;return n.createElement("g",{transform:"translate(0,".concat(t,")")},n.createElement("path",{d:"M0,0L".concat(r,",0"),fill:"none",stroke:"black"}),a)})),va=(0,n.memo)((function(e){var t=e.height,r=e.children;return n.createElement("g",null,n.createElement("path",{d:"M0,0L0,".concat(t),fill:"none",stroke:"black"}),r)})),ga=(0,$t.Z)((function(e,t){return{qScale:(0,D.Z)().range([t,0]).domain([0,1.2*Yn]),kScale:(0,D.Z)().range([0,e]).domain([0,Kn+.008])}})),xa=function(e){var t=e.width,r=e.height,a=(0,n.useContext)(ua).state,o=aa[a.vk],i=ba({width:t+20+50,height:r+25+30}),l=ga(t,r),c=l.qScale,s=l.kScale,u=(0,n.useMemo)((function(){return ta(70).map((function(e,t,r){return e/(r.length-1)*Kn})).reduce((function(e,t){return e+s(t)+","+c(t*o(t))+" "}),"M")}),[s,c,o]);return n.createElement("svg",{className:i.svg},n.createElement("g",{transform:ya},n.createElement("mask",{id:"myMask2"},n.createElement("rect",{width:t,height:r,fill:"white"})),n.createElement("path",{mask:"url(#myMask2)",className:i.path,d:u}),n.createElement(va,{height:r},n.createElement(je,{x:-20,y:c(sa(a))-10,latexstring:"q_0"}),n.createElement(je,{x:-10,y:-25,latexstring:"\\text{(veh/hr)}"})),n.createElement(Ea,{height:r,width:t},n.createElement(je,{x:s(a.vk===ra.GREENSHIELDS?Kn/2:Un)-4,y:0,latexstring:"k_0"}),n.createElement(je,{x:s(Kn)-4,y:0,latexstring:"k_j"}),n.createElement(je,{x:t,y:-15,latexstring:"\\text{(veh/km)}"}))))},ba=(0,c.Z)({path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},svg:function(e){return{width:e.width,height:e.height,"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}}},text:{textAlign:"center",fontSize:"10px"}}),ka=r(9842),wa=r(5166);function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Aa=n.memo((function(e){var t=e.changeVK,r=e.vk;return n.createElement(wa.Z,{row:!0,"aria-label":"Fundamental Diagram",name:"fd",value:r,onChange:t},n.createElement(rt.Z,{value:ra.TRIANGLE,control:n.createElement(ka.Z,null),label:"Triangle"}),n.createElement(rt.Z,{value:ra.GREENSHIELDS,control:n.createElement(ka.Z,null),label:"Greenshields"}),n.createElement(rt.Z,{value:ra.DRAKE,control:n.createElement(ka.Z,null),label:"Drake"}))})),Za={},ja=600/Rn,Oa=function(){var e=(0,n.useContext)(ua),t=e.state,r=e.dispatch,a=t.play,o=Ma(Za);d((function(e){e/=.5,r({type:la.TICK,payload:Math.min(e,.05)})}),a);var i=(0,n.useCallback)((function(e){var t=e.currentTarget.value;r({type:la.SET_VK,payload:t})}),[]);return n.createElement("div",{className:o.main},n.createElement("div",{style:{display:"flex"}},n.createElement("div",null,n.createElement(pa,{height:ja,width:600})),n.createElement("div",null,n.createElement(xa,{height:ja,width:600}))),n.createElement("div",{className:o.controls},n.createElement(m.Z,{className:o.button,variant:"contained",color:"secondary",onClick:function(){return r({type:la.SET_PLAY,payload:!a})}},a?"PAUSE":"PLAY"),n.createElement(Aa,{changeVK:i,vk:t.vk})))},Ta=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useReducer)(ca,ia),2),t=e[0],r=e[1];return n.createElement(ua.Provider,{value:{state:t,dispatch:r}},n.createElement(Oa,null))},Ma=(0,c.Z)({main:{color:o.Z[800],margin:"0 auto",boxSizing:"border-box",display:"flex",flexDirection:"column"},red:{fill:St.Z.A400},controls:{margin:"auto",display:"flex",marginTop:"10px",flexDirection:"row",alignItems:"center",justifyContent:"space-around"},button:{margin:"5px",marginRight:"45px"},visContainer:{margin:"0 auto"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),Pa=(Math.sqrt(5),1/4),Ca=Pa/3.5,Na=1.1904761904761905,La=25,Ia=3.75;function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){Ra(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ra(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var za=6e4/3600,Ka=6.666666666666666,Ua=Math.min,Ya=Math.max,Fa=(0,$t.Z)((function(e){return Ya(Ua(za,Ka*(.25/e-1)),0)})),qa=(0,$t.Z)((function(e){return Ya(Ua(za*e,Ka*(.25-e)),0)})),Va={play:!0,time:0,k:.07142857142857142},Ha=function(e){return e.TICK="TICK",e.SET_K="SET_K",e.SET_TIME="SET_TIME",e.SET_PLAY="SET_PLAY",e}({}),Ba=(0,$t.Z)((function(e){return _()(-qa(e)*La,140*e).map((function(t){return{x0:t/e,t0:0,x1:t/e+Fa(e)*La,t1:La}}))})),Ga=(0,$t.Z)((function(e,t){var r=t*Fa(e);return Ba(e).map((function(e){return e.x0+r}))})),$a=(0,$t.Z)((function(e){var t=Fa(e);return Ba(e).map((function(e){return e.x0+t*Ia})).filter((function(e){return e>=21&&e<=119})).sort((function(e,t){return t-e}))})),Xa=(0,$t.Z)((function(e){var t=Fa(e);return console.log("asdf"),Ba(e).map((function(e){return(21-e.x0)/t})).filter((function(e){return e>=Ia&&e<=22.5})).sort((function(e,t){return e-t}))})),Ja=_()(0,.2525,.0025).map((function(e){return[e,qa(e)]})),Qa=function(e,t){switch(t.type){case Ha.SET_TIME:return Wa(Wa({},e),{},{time:t.payload});case Ha.TICK:return Wa(Wa({},e),{},{time:(e.time+t.payload)%La});case Ha.SET_K:return Wa(Wa({},e),{},{k:t.payload});case Ha.SET_PLAY:return Wa(Wa({},e),{},{play:t.payload});default:return e}},eo=n.createContext({state:Va,dispatch:null}),to=r(1749);function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(4257);var no=n.memo((function(e){e.time;var t=e.xScale,r=e.tScale,a=e.t,o=e.x,i=e.className,l=(e.play,(0,n.useRef)());return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(l.current).attr("r",0).transition().ease(sr._e).duration(320).attr("r",7).attr("stroke-width",4).transition().duration(300).ease(sr._e).attr("stroke-width",2).attr("r",4.5)}),[]),n.createElement("circle",{ref:l,className:i,cx:r(a),cy:t(o)})})),ao="translate(".concat(20,",").concat(25,")"),oo=(0,$t.Z)((function(e,t){return{tScale:(0,D.Z)().range([0,e]).domain([0,La]),xScale:(0,D.Z)().range([t,0]).domain([0,140])}})),io=n.memo((function(e){var t=e.xScale,r=e.tScale,a=e.k,o=e.lineClass;return n.createElement("g",{id:"g-lines"},Ba(a).map((function(e,a){var i=e.x1,l=e.x0,c=e.t1,s=e.t0;return n.createElement("path",{key:a,d:"M".concat(r(s),",").concat(t(l),"L").concat(r(c),",").concat(t(i)),className:o})})))})),lo={},co=function(){var e=(0,n.useContext)(eo).state,t=(0,n.useRef)(),r=function(e){var t=e.width,r=e.height;return{width:Math.max(t-20-10,0),height:Math.max(r-25-25,0)}}(pn(t)),a=r.width,o=r.height,i=so(lo),l=oo(a,o),c=l.tScale,s=l.xScale,u=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ro(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ro(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useMemo)((function(){return[o-s(3),o-s(1.5)]}),[s]),2),m=u[0],f=u[1];return n.createElement("div",{ref:t,className:i.container},n.createElement("svg",{className:i.svg},n.createElement(Ve,null),n.createElement("g",{transform:ao},n.createElement("mask",{id:"myMask2"},n.createElement("rect",{width:a,height:o,fill:"white"})),n.createElement("mask",{id:"myMask3"},n.createElement("rect",{width:c(e.time),height:o,fill:"white"})),n.createElement("g",{id:"g-masked",mask:"url(#myMask2)"},(0,n.createElement)("path",{className:i.road,strokeWidth:o-s(5),d:"M0,0L0,".concat(o),transform:"translate(".concat(c(e.time),",0)")}),n.createElement("g",{className:i.maskedLines,mask:"url(#myMask3)"},(0,n.createElement)(io,{xScale:s,tScale:c,k:e.k,lineClass:i.line})),n.createElement("g",{id:"g-cut"},n.createElement("rect",{className:i.cut,width:c(18.75),height:o-s(98),y:s(119),x:c(Ia)}),e.time>=Ia&&$a(e.k).map((function(t,r){return n.createElement(no,{key:r,x:t,t:Ia,tScale:c,xScale:s,time:e.time,play:e.play,className:i.kdot})})),Xa(e.k).filter((function(t){return t<=e.time})).map((function(t,r){return n.createElement(no,{key:r,x:21,t:t,tScale:c,xScale:s,time:e.time,play:e.play,className:i.qdot})}))),n.createElement("g",{id:"g-lane",transform:"translate(".concat(c(e.time),",0)")},n.createElement("g",{id:"g-cars"},Ga(e.k,e.time).map((function(e,t){return n.createElement("rect",{key:t,className:i.car,y:s(e)+m/6,x:-f/2,height:m,width:f})}))))),n.createElement("g",{id:"vaxis"},n.createElement("path",{d:"M0,0L0,".concat(o),fill:"none",stroke:"black",className:i.axis,markerStart:"url(#arrow)"}),n.createElement(je,{x:-10,y:-25,latexstring:"x \\; \\text{(m)}"})),n.createElement("g",{transform:"translate(0,".concat(o,")"),id:"taxis"},n.createElement("path",{d:"M0,0L".concat(a,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:i.axis}),n.createElement(je,{x:a-15,y:5,latexstring:"t \\; \\text{(s)}"})))))},so=(0,c.Z)({path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"1,1"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",rx:2,ry:2,fill:ot.Z.A400,fillOpacity:.15},car:{fill:it.Z.A200},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:Se.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}});function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mo="translate(".concat(20,",").concat(20,")"),fo={},po=function(){var e=(0,n.useContext)(eo).state,t=(0,n.useRef)(),r=function(e){var t=e.width,r=e.height;return{width:Math.max(t-20-10,0),height:Math.max(r-20-20,0)}}(pn(t)),a=r.width,o=r.height,i=ho(fo),l=ve([0,a],[0,.275],[a]),c=ve([o,0],[0,1.2*Na],[o]),s=(0,n.useMemo)((function(){var e="M"+Ja.map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=t[0],n=t[1];return[l(r),c(n)]})).join("L");return n.createElement("path",{className:i.path,d:e})}),[a,o]);return n.createElement("div",{ref:t,className:i.container},n.createElement("svg",{className:i.svg},n.createElement(Ve,null),n.createElement("g",{transform:mo},n.createElement("mask",{id:"myMask4"},n.createElement("rect",{width:a,height:o,fill:"white"})),n.createElement("g",{mask:"url(#myMask4)"},s,n.createElement("circle",{cx:l(e.k),cy:c(qa(e.k)),className:i.dot,r:6})),n.createElement("g",{id:"g-qaxis"},n.createElement("path",{d:"M0,0L0,".concat(o),fill:"none",stroke:"black",className:i.axis,markerStart:"url(#arrow)"}),n.createElement(je,{y:c(Na)-12,x:-15,latexstring:"q_0"}),n.createElement(je,{x:-10,y:-25,latexstring:"q \\; \\text{veh/s}"})),n.createElement("g",{transform:"translate(0,".concat(o,")"),id:"g-kaxis"},n.createElement("path",{d:"M0,0L".concat(a,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:i.axis}),n.createElement(je,{x:l(Ca),y:0,latexstring:"k_0"}),n.createElement(je,{x:a-70,y:5,latexstring:"k \\; \\text{(veh/100 m)}"})))))},ho=(0,c.Z)({dot:{fill:l.Z[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}});function yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eo=(0,Qe.Z)((function(e){return{root:{color:e.palette.primary.main,marginBottom:"5px"}}}))(Je.Z),vo=function(){var e=(0,n.useContext)(eo),t=e.state,r=e.dispatch,a=t.play,o=ko(go);return d((function(e){e/=.25,r({type:Ha.TICK,payload:e})}),a),n.createElement(at.Z,{elevation:2,className:o.paper},n.createElement(m.Z,{component:"div",className:o.button,variant:"contained",color:"secondary",onClick:function(){return r({type:Ha.SET_PLAY,payload:!a})}},a?"PAUSE":"PLAY"),n.createElement("div",{className:o.sliderLabel,style:{marginTop:15}},"density ",n.createElement(Ae.Z,{math:"k \\; \\text{(veh/km)}"})),n.createElement(Eo,{component:"div",onChange:function(e,t){return r({type:Ha.SET_K,payload:t})},value:t.k,step:Pa/300,min:0,max:Pa}),n.createElement("div",{className:o.sliderLabel},"time ",n.createElement(Ae.Z,{math:"t \\; (s)"})),n.createElement(Eo,{component:"div",onChange:function(e,t){return r({type:Ha.SET_TIME,payload:t})},value:t.time,step:La/300,min:0,max:La}))},go={},xo=function(){var e=ko(go);return n.createElement(to.Z,{direction:"column",container:!0,className:e.main,alignItems:"stretch",spacing:3},n.createElement(to.Z,{item:!0,className:e.spaceTimeContainer},n.createElement(co,null)),n.createElement(to.Z,{item:!0,className:e.qkContainer},n.createElement(po,null)),n.createElement(to.Z,{item:!0},n.createElement(vo,null)))},bo=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useReducer)(Qa,Va),2),t=e[0],r=e[1];return n.createElement(eo.Provider,{value:{state:t,dispatch:r}},n.createElement(xo,null))},ko=(0,c.Z)({qkContainer:{height:"250px"},spaceTimeContainer:{height:"450px"},main:{maxWidth:"700px",margin:"0 auto"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),wo=r(9969),So=r(1581),Ao=25,Zo=22.5,jo=3.75;function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){Po(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Po(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Oo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Math.min,Math.max;var Co,No,Lo={play:!0,time:0,kCar:.1,vCar:10,kTruck:.1,vTruck:6},Io=function(e){return e.TICK="TICK",e.SET_VAR="SET_VAR",e.SET_PLAY="SET_PLAY",e}({}),_o=function(e){var t="k"+e,r="v"+e,n=(0,Nr.P1)([Ir()(t),Ir()(r)],(function(e,t){return _()(150*e,-t*e*Ao).map((function(r){return{x0:r/e,t0:0,x1:r/e+t*Ao,t1:Ao}}))})),a=(0,Nr.P1)([Ir()(r),Ir()("time"),n],(function(e,t,r){var n=t*e;return r.map((function(e){var t=e.x0;return{id:t,x:t+n}}))})),o=(0,Nr.P1)([Ir()(r),n],(function(e,t){var r=e*jo;return t.map((function(e){return e.x0+r})).filter((function(e){return e>=22.5&&e<=135})).sort((function(e,t){return e-t}))})),i=(0,Nr.P1)([Ir()(r),n],(function(e,t){return t.map((function(t){return(22.5-t.x0)/e})).filter((function(e){return e>=3.75&&e<=22.5})).sort((function(e,t){return e-t}))}));return{getLines:n,getKDots:o,getQDots:i,getVehs:a}},Do=(0,Nr.P1)([Ir()("vCar"),Ir()("vTruck"),Ir()("kCar"),Ir()("kTruck")],(function(e,t,r,n){return{timeMean:(e*e*r+t*t*n)/(e*r+t*n),spaceMean:(e*r+t*n)/(r+n)}})),Wo=_o("Car"),Ro=Wo.getLines,zo=Wo.getKDots,Ko=Wo.getQDots,Uo=Wo.getVehs,Yo=_o("Truck"),Fo=Yo.getLines,qo=Yo.getKDots,Vo=Yo.getQDots,Ho=Yo.getVehs,Bo=function(e,t){switch(t.type){case Io.SET_VAR:return Mo(Mo({},e),{},Po({},t.payload.key,t.payload.val));case Io.TICK:return Mo(Mo({},e),{},{time:(e.time+t.payload)%Ao});case Io.SET_PLAY:return Mo(Mo({},e),{},{play:t.payload});default:return e}},Go=n.createContext({state:Lo,dispatch:null}),$o="translate(".concat(20,",").concat(25,")"),Xo=570,Jo=540,Qo=(0,D.Z)().range([0,Xo]).domain([0,Ao]),ei=(0,D.Z)().range([Jo,0]).domain([0,150]),ti=Jo-ei(2),ri=Jo-ei(1.5),ni=Jo-ei(4),ai=Jo-ei(2),oi=it.Z.A400,ii=Se.Z.A700,li={opacity:.55},ci=(0,n.memo)((function(e){var t=e.t,r=e.x,a=e.fill,o=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(o.current).attr("r",0).transition().ease(sr._e).duration(250).attr("r",5).transition().duration(250).ease(sr._e).attr("r",3.5)}),[]),n.createElement("circle",{ref:o,r:"4px",fill:a,style:li,cx:Qo(t),cy:ei(r)})})),si=function(){var e={strokeWidth:"1.5px",strokeDasharray:"1,1"};return n.memo((function(t){var r=t.lines,a=t.stroke;return n.createElement("g",{id:"g-lines"},r.map((function(t,r){var o=t.x1,i=t.x0,l=t.t1,c=t.t0;return n.createElement("path",{key:r,style:e,stroke:a,d:"M".concat(Qo(c),",").concat(ei(i),"L").concat(Qo(l),",").concat(ei(o))})})))}))}(),ui=n.createElement("g",{transform:"translate(".concat(250,",",551,")")},n.createElement("g",null,n.createElement("rect",{width:"10",height:"10",fill:oi}),n.createElement("text",{x:18,y:"10",style:{fontSize:"16px"}},"car")),n.createElement("g",{transform:"translate(70,0)"},n.createElement("rect",{width:"10",height:"10",fill:ii}),n.createElement("text",{x:18,y:"10",style:{fontSize:"16px"}},"truck"))),mi={},fi=(Co={strokeWidth:"2px",color:o.Z[800]},n.createElement("g",null,n.createElement("g",{id:"vaxis"},n.createElement("path",{d:"M0,0L0,".concat(Jo),fill:"none",stroke:"black",style:Co,markerStart:"url(#arrow)"}),n.createElement(je,{x:-10,y:-25,latexstring:"x \\; \\text{(m)}"})),n.createElement("g",{transform:"translate(0,".concat(Jo,")"),id:"taxis"},n.createElement("path",{d:"M0,0L".concat(Xo,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",style:Co}),n.createElement(je,{x:552,y:5,latexstring:"t \\; \\text{(s)}"})))),di={strokeDasharray:"2,2",stroke:o.Z[500],strokeWidth:"2px"},pi=n.createElement("g",{transform:"translate(".concat(Qo(jo),",0)")},n.createElement("path",{d:"M0,0L0,".concat(Jo),style:di}),n.createElement(je,{x:-3,y:543,latexstring:"t^*"})),hi=n.createElement("g",{transform:"translate(0,".concat(ei(Zo),")")},n.createElement("path",{d:"M0,0L".concat(Xo,",0"),style:di}),n.createElement(je,{x:-18,y:-11,latexstring:"x^* "})),yi=(0,n.createElement)("path",{stroke:o.Z[300],strokeWidth:Jo-ei(7),d:"M0,0L0,".concat(Jo)}),Ei=(No={stroke:o.Z[700],strokeWidth:"2px",rx:2,ry:2,fill:ot.Z.A400,fillOpacity:.15},n.createElement("rect",{style:No,width:Qo(18.75),height:Jo-ei(112.5),y:ei(135),x:Qo(jo)})),vi=n.createElement("mask",{id:"myMask10"},n.createElement("rect",{width:Xo,height:Jo,fill:"white"})),gi=function(){var e=(0,n.useContext)(Go).state,t=xi(mi);return n.createElement("svg",{className:t.svg},n.createElement(Ve,null),n.createElement("g",{transform:$o},vi,n.createElement("mask",{id:"myMask3"},n.createElement("rect",{width:Qo(e.time),height:Jo,fill:"white"})),n.createElement("g",{mask:"url(#myMask3)"},n.createElement(si,{lines:Ro(e),stroke:oi}),n.createElement(si,{lines:Fo(e),stroke:ii})),pi,hi,n.createElement("g",{id:"g-masked",mask:"url(#myMask10)"},Ei,e.time>=jo&&n.createElement("g",null,n.createElement("g",null,zo(e).map((function(e,t){return n.createElement(ci,{key:t,x:e,t:jo,fill:oi})}))),n.createElement("g",null,qo(e).map((function(e,t){return n.createElement(ci,{key:t,x:e,t:jo,fill:ii})}))),n.createElement("g",null,Ko(e).filter((function(t){return t<=e.time})).map((function(e,t){return n.createElement(ci,{key:t,x:Zo,t:e,fill:oi})}))),n.createElement("g",null,Vo(e).filter((function(t){return t<=e.time})).map((function(e,t){return n.createElement(ci,{key:t,x:Zo,t:e,fill:ii})})))),n.createElement("g",{id:"g-lane",transform:"translate(".concat(Qo(e.time),",0)")},yi,n.createElement("g",{id:"g-cars"},Uo(e).map((function(e){var t=e.x,r=e.id;return n.createElement("rect",{key:r,fill:oi,y:ei(t)+ti/6,x:4-ri/2,height:ti,width:ri})}))),n.createElement("g",{id:"g-trucks"},Ho(e).map((function(e){var r=e.id,a=e.x;return n.createElement("rect",{key:r,className:t.car,y:ei(a)+ni/6,x:-4-ai/2,height:ni,width:ai,fill:ii})}))))),fi,ui))},xi=(0,c.Z)({svg:{width:600,height:590,"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},text:{textAlign:"center",fontSize:"10px"}}),bi=(0,qe.Z)((function(e){return{root:{color:e.palette.secondary.main}}}))(Je.Z),ki={fontSize:"14px"},wi={width:"100%"},Si=function(e){var t=e.keyVar,r=e.step,a=e.min,o=e.max,i=e.latexstring,l=e.label,c=e.value,s=(0,n.useContext)(Go).dispatch;return n.createElement("div",{style:wi},n.createElement("div",{style:ki},l," ",n.createElement(Ae.Z,{math:i})),n.createElement(bi,{component:"div",onChange:function(e,r){return s({type:Io.SET_VAR,payload:{key:t,val:r}})},value:c,step:r,min:a,max:o}))},Ai=270,Zi={controlsContainer:{display:"flex",alignItems:"center",flexDirection:"column",padding:"5px 15px",width:300,boxSizing:"border-box"},button:{margin:"5px auto"}},ji=function(){var e=(0,n.useContext)(Go),t=e.state,r=e.dispatch,a=t.play;return d((function(e){e/=.25,r({type:Io.TICK,payload:e})}),a),n.createElement("div",{style:Zi.controlsContainer},n.createElement(Si,{step:.01,min:.01,max:12,keyVar:"vCar",latexstring:" v_{\\text{car}}",label:"speed car",value:t.vCar}),n.createElement(Si,{step:.01,min:.01,max:12,keyVar:"vTruck",latexstring:"v_{\\text{truck}} ",label:"speed truck",value:t.vTruck}),n.createElement("div",{style:{padding:"11px"}},n.createElement("div",{style:ki},"Time-mean speed ",n.createElement(Ae.Z,{math:"v_t"})),n.createElement("svg",{width:Ai,height:15},n.createElement("rect",{height:15,width:Do(t).timeMean/12*Ai,fill:l.Z.A400}))),n.createElement("div",{style:{padding:"11px"}},n.createElement("div",{style:ki},"Space-mean speed ",n.createElement(Ae.Z,{math:"v_s"})),n.createElement("svg",{width:Ai,height:15},n.createElement("rect",{height:15,width:Do(t).spaceMean/12*Ai,fill:l.Z.A400}))),n.createElement(Si,{step:.01,min:0,max:Ao,keyVar:"time",latexstring:"t",label:"time",value:t.time}),n.createElement("div",null,n.createElement(m.Z,{component:"div",style:Zi.button,variant:"contained",color:"secondary",onClick:function(){return r({type:Io.SET_PLAY,payload:!a})}},a?"PAUSE":"PLAY")))};function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ti(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mi={},Pi=function(){var e=Ni(Mi),t=Oi(n.useState(!1),2),r=t[0],a=t[1];return n.createElement("div",{className:e.container},n.createElement(rt.Z,{control:n.createElement(nt.Z,{checked:r,onChange:function(){a((function(e){return!e}))}}),label:"show video"}),n.createElement(tt.Z,{in:r},n.createElement(at.Z,{elevation:2},n.createElement("div",{className:e.videoContainer},n.createElement("iframe",{width:"640",height:"360",src:"https://www.loom.com/embed/1fa88513238d4b6aa0b211b7f1973e03",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))),n.createElement("div",{className:e.main},n.createElement("div",null,n.createElement(gi,null)),n.createElement(ji,null)))},Ci=function(){var e=Oi((0,n.useReducer)(Bo,Lo),2),t=e[0],r=e[1];return n.createElement(Go.Provider,{value:{state:t,dispatch:r}},n.createElement(Pi,null))},Ni=(0,c.Z)({qkContainer:{height:"250px"},spaceTimeContainer:{height:"450px"},main:{display:"flex",margin:"0 auto"},container:{display:"flex",flexDirection:"column",alignItems:"center"},videoContainer:{width:640,height:360}});function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(r),!0).forEach((function(t){Di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Di(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Li(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Li(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wi(e,t){if(e){if("string"==typeof e)return Ri(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ri(e,t):void 0}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Math.sqrt(5);var zi=300,Ki=Math.min,Ui=Math.max,Yi=(0,Nr.P1)([function(e){return e.kj},function(e){return e.k0},function(e){return e.vf}],(function(e,t,r){var n=r*t/(e-t);return function(t){return Ui(Ki(r,n*(e/t-1)),0)}})),Fi=(0,Nr.P1)([Yi],(function(e){return function(t){return t*e(t)}})),qi=function(e){return _()(0,zi,1/e).map((function(e){return{id:e,x:e}}))},Vi={play:!1,time:0,vf:4.5,kj:1/3,k0:1/9,k:.1,cars:qi(.1),flowCount:[]},Hi=function(e){return e.TICK="TICK",e.SET_K="SET_K",e.SET_PLAY="SET_PLAY",e.SET_VF="SET_VF",e.SET_KJ="SET_KJ",e.SET_K0="SET_K0",e}({}),Bi=function(e,t){switch(t.type){case Hi.TICK:var r,n=!1,a=t.payload*Yi(e)(e.k),o=e.cars.map((function(e){var t=e.x+a;return t>zi&&e.x<zi&&(n=!0),t%=zi,{id:e.id,x:t}})),i=e.time+t.payload,l=n?[].concat(function(e){return function(e){if(Array.isArray(e))return Ri(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.flowCount),[i]):e.flowCount,c=!1,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Wi(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(l);try{for(s.s();!(r=s.n()).done;)r.value<=i-30&&(c=!0)}catch(e){s.e(e)}finally{s.f()}return c&&(l=l.filter((function(e){return e>i-30}))),_i(_i({},e),{},{cars:o,time:i,flowCount:l});case Hi.SET_K0:return _i(_i({},e),{},{k0:t.payload});case Hi.SET_VF:return _i(_i({},e),{},{vf:t.payload});case Hi.SET_KJ:return _i(_i({},e),{},{kj:t.payload});case Hi.SET_K:return _i(_i({},e),{},{k:t.payload,cars:qi(t.payload)});case Hi.SET_PLAY:return _i(_i({},e),{},{play:t.payload});default:return e}},Gi=n.createContext({state:Vi,dispatch:null}),$i="translate(".concat(20,",").concat(20,")"),Xi=function(){var e,t=(0,n.useContext)(Gi).state,r=(0,n.useRef)(),a={width:(e=pn(r)).width-20-20,height:e.height-20-20}.width,i=Ji({width:a}),c=a/2-10,s=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(s.current).attr("x",c-10).attr("fill",o.Z.A400).attr("width",20)}),[c]),(0,n.useLayoutEffect)((function(){a<10||(0,Bt.Z)(s.current).transition().ease(sr.tw).duration(100).attr("x",c-10-2.5).attr("width",25).attr("fill",l.Z.A400).transition().duration(200).ease(sr._e).attr("x",c-10).attr("fill",o.Z.A400).attr("width",20)}),[t.flowCount[t.flowCount.length-1]]),n.createElement("div",{ref:r,className:i.container},n.createElement("svg",{className:i.svg},n.createElement("g",{transform:$i},n.createElement("g",{transform:"translate(".concat(a/2,",").concat(a/2,")")},n.createElement("circle",{className:i.road,r:c}),n.createElement("g",{transform:"translate(".concat(c+10+5,",0)")},n.createElement(tl,{flow:t.flowCount.length})),n.createElement("g",{id:"g-cars"},t.cars.map((function(e){return n.createElement("rect",{key:e.id,transform:"rotate(".concat(e.x/300*360,") "),className:i.car,x:c-1.5,rx:"1",ry:"1",width:"2",height:"4"})})),n.createElement("rect",{y:0,ref:s,stroke:"white",height:4,dy:-2}))))))},Ji=(0,c.Z)({dot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",boxSizing:"border-box",width:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:function(e){return e.width+20+20},"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300],strokeWidth:20,fill:"none"},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),Qi={fill:l.Z[500]},el=(0,D.Z)().domain([0,8.6]).range([0,100]),tl=function(e){var t=e.flow,r=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(r.current).transition().duration(100).ease(sr._e).attr("y",-el(t)).attr("height",el(t))}),[t]),n.createElement("rect",{ref:r,style:Qi,width:"5px"})},rl="translate(".concat(20,",").concat(20,")"),nl={},al=function(){var e=(0,n.useContext)(Gi).state,t=(0,n.useRef)(),r=function(e){var t=e.width,r=e.height;return{width:Math.max(t-20-40,0),height:Math.max(r-20-20,0)}}(pn(t)),a=r.width,o=r.height,i=ol(nl),l=ve([0,a],[0,.4],[a]),c=ve([o,0],[0,2/3],[o]),s=Fi(e),u=(0,n.useMemo)((function(){var t="M"+_()(0,e.kj+.005,e.kj/100).map((function(e){return[l(e),c(s(e))]})).join("L");return n.createElement("path",{className:i.path,d:t})}),[a,o,e.kj,e.k0,e.vf]);return n.createElement("div",{ref:t,className:i.container},n.createElement("svg",{className:i.svg},n.createElement(Ve,null),n.createElement("g",{transform:rl},n.createElement("mask",{id:"myMask4"},n.createElement("rect",{width:a,height:o,fill:"white"})),n.createElement("g",{mask:"url(#myMask4)"},u,n.createElement("circle",{cx:l(e.k),cy:c(s(e.k)),className:i.dot,r:6})),n.createElement("g",{id:"g-qaxis"},n.createElement("path",{d:"M0,0L0,".concat(o),fill:"none",stroke:"black",className:i.axis,markerStart:"url(#arrow)"}),n.createElement(je,{y:c(e.k0*e.vf)-9,x:-15,latexstring:"q_0"}),n.createElement(je,{x:-20,y:-25,latexstring:"q \\; \\text{(veh/s)}"})),n.createElement("g",{transform:"translate(0,".concat(o,")"),id:"g-kaxis"},n.createElement("path",{d:"M0,0L".concat(a,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:i.axis}),n.createElement(je,{x:l(e.k0),y:0,latexstring:"k_0"}),n.createElement(je,{x:l(e.kj),y:0,latexstring:"k_j"}),n.createElement(je,{x:a-40,y:-24,latexstring:"k \\; \\text{(veh/km)}"})))))},ol=(0,c.Z)({dot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}});function il(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ll(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ll(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cl=(0,Qe.Z)((function(e){return{root:{color:e.palette.secondary.main,marginBottom:"5px"}}}))(Je.Z),sl=function(){var e=(0,n.useContext)(Gi),t=e.state,r=e.dispatch,a=t.play,o=dl(ul);return d((function(e){e/=.2,r({type:Hi.TICK,payload:e})}),a),n.createElement(n.Fragment,null,n.createElement(m.Z,{component:"div",className:o.button,variant:"contained",color:"secondary",onClick:function(){return r({type:Hi.SET_PLAY,payload:!a})}},a?"PAUSE":"PLAY"),n.createElement("div",{style:{width:"100%"}},n.createElement("div",{className:o.sliderLabel,style:{marginTop:15}},"density ",n.createElement(Ae.Z,{math:"k \\; \\text{(veh/km)}"})),n.createElement(cl,{component:"div",onChange:function(e,t){return r({type:Hi.SET_K,payload:t})},value:t.k,step:.01,min:0,max:t.kj})))},ul={},ml=function(){var e=dl(ul),t=il(n.useState(!1),2),r=t[0],a=t[1];return n.createElement("div",{className:e.container},n.createElement(rt.Z,{control:n.createElement(nt.Z,{checked:r,onChange:function(){a((function(e){return!e}))}}),label:"show video"}),n.createElement(tt.Z,{in:r},n.createElement(at.Z,{elevation:2},n.createElement("div",{className:e.videoContainer},n.createElement("iframe",{width:"640",height:"360",src:"https://www.loom.com/embed/c6635b0e86344b5dbf28f23fd1c074d3",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))),n.createElement("div",{className:e.main},n.createElement("div",{className:e.ringContainer},n.createElement(Xi,null)),n.createElement("div",{className:e.qkContainer},n.createElement("div",{style:{height:"270px",width:"100%"}},n.createElement(al,null)),n.createElement(sl,null))))},fl=function(){var e=il((0,n.useReducer)(Bi,Vi),2),t=e[0],r=e[1];return n.createElement(Gi.Provider,{value:{state:t,dispatch:r}},n.createElement(ml,null))},dl=(0,c.Z)({qkContainer:{width:"420px",display:"flex",flexDirection:"column",alignItems:"center"},row:{display:"flex",flexDirection:"row"},ringContainer:{width:"500px"},main:{margin:"0 auto",display:"flex"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},container:{display:"flex",flexDirection:"column",alignItems:"center"},videoContainer:{width:640,height:360}});function pl(e){return pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(e)}function hl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(r),!0).forEach((function(t){El(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function El(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==pl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===pl(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vl(e,t){if(e){if("string"==typeof e)return gl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gl(e,t):void 0}}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Math.sqrt(5);var xl=300,bl=Math.min,kl=Math.max,wl=(0,Nr.P1)([function(e){return e.kj},function(e){return e.k0},function(e){return e.vf}],(function(e,t,r){var n=r*t/(e-t);return function(t){return kl(bl(r,n*(e/t-1)),0)}})),Sl=(0,Nr.P1)([wl],(function(e){return function(t){return t*e(t)}})),Al=function(e){return _()(0,xl,1/e).map((function(e){return{id:e,x:e}}))},Zl={play:!1,time:0,vf:4.5,kj:1/3,k0:1/9,k:.1,cars:Al(.1),flowCount:[]},jl=function(e){return e.TICK="TICK",e.SET_K="SET_K",e.SET_PLAY="SET_PLAY",e.SET_VF="SET_VF",e.SET_KJ="SET_KJ",e.SET_K0="SET_K0",e}({}),Ol=function(e,t){switch(t.type){case jl.TICK:var r,n=!1,a=t.payload*wl(e)(e.k),o=e.cars.map((function(e){var t=e.x+a;return t>xl&&e.x<xl&&(n=!0),t%=xl,{id:e.id,x:t}})),i=e.time+t.payload,l=n?[].concat(function(e){return function(e){if(Array.isArray(e))return gl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.flowCount),[i]):e.flowCount,c=!1,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=vl(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(l);try{for(s.s();!(r=s.n()).done;)r.value<=i-30&&(c=!0)}catch(e){s.e(e)}finally{s.f()}return c&&(l=l.filter((function(e){return e>i-30}))),yl(yl({},e),{},{cars:o,time:i,flowCount:l});case jl.SET_K0:return yl(yl({},e),{},{k0:Math.min(t.payload,e.kj)});case jl.SET_VF:return yl(yl({},e),{},{vf:t.payload});case jl.SET_KJ:return yl(yl({},e),{},{k0:Math.min(t.payload,e.k0),kj:t.payload});case jl.SET_K:return yl(yl({},e),{},{k:t.payload,cars:Al(t.payload)});case jl.SET_PLAY:return yl(yl({},e),{},{play:t.payload});default:return e}},Tl=n.createContext({state:Zl,dispatch:null}),Ml="translate(".concat(20,",").concat(20,")"),Pl=function(){var e,t=(0,n.useContext)(Tl).state,r=(0,n.useRef)(),a={width:(e=pn(r)).width-20-20,height:e.height-20-20}.width,i=Cl({width:a}),c=a/2-10,s=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(s.current).attr("x",c-10).attr("fill",o.Z.A400).attr("width",20)}),[c]),(0,n.useLayoutEffect)((function(){a<10||(0,Bt.Z)(s.current).transition().ease(sr.tw).duration(100).attr("x",c-10-2.5).attr("width",25).attr("fill",l.Z.A400).transition().duration(200).ease(sr._e).attr("x",c-10).attr("fill",o.Z.A400).attr("width",20)}),[t.flowCount[t.flowCount.length-1]]),n.createElement("div",{ref:r,className:i.container},n.createElement("svg",{className:i.svg},n.createElement("g",{transform:Ml},n.createElement("g",{transform:"translate(".concat(a/2,",").concat(a/2,")")},n.createElement("circle",{className:i.road,r:c}),n.createElement("g",{transform:"translate(".concat(c+10+5,",0)")},n.createElement(Il,{flow:t.flowCount.length})),n.createElement("g",{id:"g-cars"},t.cars.map((function(e){return n.createElement("rect",{key:e.id,transform:"rotate(".concat(e.x/300*360,") "),className:i.car,x:c-1.5,rx:"1",ry:"1",width:"2",height:"4"})})),n.createElement("rect",{y:0,ref:s,stroke:"white",height:4,dy:-2}))))))},Cl=(0,c.Z)({dot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",boxSizing:"border-box",width:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:function(e){return e.width+20+20},"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300],strokeWidth:20,fill:"none"},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),Nl={fill:l.Z[500]},Ll=(0,D.Z)().domain([0,8.6]).range([0,100]),Il=function(e){var t=e.flow,r=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){(0,Bt.Z)(r.current).transition().duration(100).ease(sr._e).attr("y",-Ll(t)).attr("height",Ll(t))}),[t]),n.createElement("rect",{ref:r,style:Nl,width:"5px"})};function _l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dl="translate(".concat(20,",").concat(20,")"),Wl={},Rl=function(){var e=(0,n.useContext)(Tl).state,t=(0,n.useRef)(),r=function(e){var t=e.width,r=e.height;return{width:Math.max(t-20-40,0),height:Math.max(r-20-20,0)}}(pn(t)),a=r.width,o=r.height,i=zl(Wl),l=ve([0,a],[0,.4],[a]),c=ve([o,0],[0,2/3],[o]),s=Sl(e),u=(0,n.useMemo)((function(){var t="M"+[[0,0],[e.k0,e.k0*e.vf],[e.kj,0]].map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=t[0],n=t[1];return[l(r),c(n)]})).join("L");return n.createElement("path",{className:i.path,d:t})}),[a,o,e.kj,e.k0,e.vf]);return n.createElement("div",{ref:t,className:i.container},n.createElement("svg",{className:i.svg},n.createElement(Ve,null),n.createElement("g",{transform:Dl},n.createElement("mask",{id:"myMask4"},n.createElement("rect",{width:a,height:o,fill:"white"})),n.createElement("g",{mask:"url(#myMask4)"},u,n.createElement("circle",{cx:l(e.k),cy:c(s(e.k)),className:i.dot,r:6})),n.createElement("g",{id:"g-qaxis"},n.createElement("path",{d:"M0,0L0,".concat(o),fill:"none",stroke:"black",className:i.axis,markerStart:"url(#arrow)"}),n.createElement(je,{y:c(e.k0*e.vf)-9,x:-15,latexstring:"q_0"}),n.createElement(je,{x:-20,y:-25,latexstring:"q \\; \\text{(veh/min)}"})),n.createElement("g",{transform:"translate(0,".concat(o,")"),id:"g-kaxis"},n.createElement("path",{d:"M0,0L".concat(a,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:i.axis}),n.createElement(je,{x:l(e.k0),y:0,latexstring:"k_0"}),n.createElement(je,{x:l(e.kj),y:0,latexstring:"k_j"}),n.createElement(je,{x:a-40,y:-24,latexstring:"k \\; \\text{(veh/km)}"})))))},zl=(0,c.Z)({dot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:i.Z.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:i.Z.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:o.Z[700],strokeWidth:"2px",fill:Se.Z.A200,fillOpacity:.2},car:{fill:it.Z.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:o.Z[300]},axis:{strokeWidth:"2px",color:o.Z[800]},qdot:{fill:l.Z.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:lt.Z.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}});function Kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ul(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ul(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yl=(0,Qe.Z)((function(e){return{root:{color:e.palette.secondary.main,marginBottom:"5px"}}}))(Je.Z),Fl=function(){var e=(0,n.useContext)(Tl),t=e.state,r=e.dispatch,a=t.play,o=Bl(ql);return d((function(e){e/=.16,r({type:jl.TICK,payload:e})}),a),n.createElement(n.Fragment,null,n.createElement(m.Z,{component:"div",className:o.button,variant:"contained",color:"secondary",onClick:function(){return r({type:jl.SET_PLAY,payload:!a})}},a?"PAUSE":"PLAY"),n.createElement("div",{style:{width:"100%"}},n.createElement("div",{className:o.sliderLabel,style:{marginTop:15}},"density ",n.createElement(Ae.Z,{math:"k \\; \\text{(veh/km)}"})),n.createElement(Yl,{component:"div",onChange:function(e,t){return r({type:jl.SET_K,payload:t})},value:t.k,step:.01,min:.05,max:.4}),n.createElement("div",{className:o.sliderLabel},"speed ",n.createElement(Ae.Z,{math:"v_f \\; \\text{(m/s)}"})),n.createElement(Yl,{component:"div",onChange:function(e,t){return r({type:jl.SET_VF,payload:t})},value:t.vf,step:.01,min:.05,max:7}),n.createElement("div",{className:o.sliderLabel},"critical density ",n.createElement(Ae.Z,{math:"k_{0} \\; \\text{(veh/km)}"})),n.createElement(Yl,{component:"div",onChange:function(e,t){return r({type:jl.SET_K0,payload:t})},value:t.k0,step:.01,min:.05,max:.4}),n.createElement("div",{className:o.sliderLabel},"jam density ",n.createElement(Ae.Z,{math:"k_{j} \\; \\text{(veh/km)}"})),n.createElement(Yl,{component:"div",onChange:function(e,t){return r({type:jl.SET_KJ,payload:t})},value:t.kj,step:.01,min:.01,max:.4})))},ql={},Vl=function(){var e=Bl(ql),t=Kl(n.useState(!1),2);return t[0],t[1],n.createElement("div",{className:e.container},n.createElement("div",{className:e.main},n.createElement("div",{className:e.ringContainer},n.createElement(Pl,null)),n.createElement("div",{className:e.qkContainer},n.createElement("div",{style:{height:"270px",width:"100%"}},n.createElement(Rl,null)),n.createElement(Fl,null))))},Hl=function(){var e=Kl((0,n.useReducer)(Ol,Zl),2),t=e[0],r=e[1];return n.createElement(Tl.Provider,{value:{state:t,dispatch:r}},n.createElement(Vl,null))},Bl=(0,c.Z)({qkContainer:{width:"420px",display:"flex",flexDirection:"column",alignItems:"center"},row:{display:"flex",flexDirection:"row"},ringContainer:{width:"500px"},main:{margin:"0 auto",display:"flex"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},container:{display:"flex",flexDirection:"column",alignItems:"center"},videoContainer:{width:640,height:360}}),Gl=r.p+"134a3e9b8bf33616dc44e57c68625543.jpg",$l=r.p+"c7220c8f7174767d4bb9692ed7a6b01d.jpeg",Xl=r.p+"ccf3d843e468c2bf70a3141f0c14da09.png";function Jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ql=Object.entries({"/":"Traffic Vis","dilemma-zone":"Dilemma Zones","construction-zone":"Construction Zone","space-mean":"Space vs. Time Mean Speed","fundamental-diagram":"Fundamental Diagram","fundamental-diagrams":"Three Fundamental Diagrams"}).slice(1),ec=function(){return n.createElement("div",{style:{maxWidth:"700px",margin:"0 auto",lineHeight:"1.5em"}},n.createElement("div",null,"Welcome! This site hosts interactive visualizations that help students understand concepts from ",n.createElement("em",null,"CEE 310: Transportation Engineering,")," an introductory course at University of Illinois at Urbana-Champaign. Each visualization has a short video that you can toggle to explain what's going on. If you teach transportation engineering, feel free to use the interactives in your class."),n.createElement("div",null,n.createElement("ul",null,Ql.map((function(e){return n.createElement(s.rU,{to:e[0],key:e[0]},n.createElement("li",null,e[1]))})))),n.createElement("div",null,"These are created by"," ",n.createElement("a",{href:"https://lewislehe.com",target:"__blank"},"Dr. Lewis Lehe"),". Check out the"," ",n.createElement("a",{href:"https://lehelab.com"},"Urban Traffic and Economics Lab")," to learn more about his group's research."))},tc=function(){var e=(0,c.Z)({about:{maxWidth:"700px",fontSize:"16px",lineHeight:"1.5em",display:"flex",flexDirection:"column",margin:"0 auto",alignItems:"center","& hr":{borderTop:"1px solid "+o.Z[400],width:"100%",margin:"10px 0px",background:"none"}},imgContainer:{alignSelf:"center",display:"flex",justifyContent:"center","& img":{width:"200px",boxShadow:"1px 1px 2px ".concat(o.Z[400]),marginRight:"20px"}},person:{display:"flex",marginBottom:"20px"}});return function(){var t=e({});return n.createElement("div",{className:t.about},n.createElement("div",{style:{fontSize:"24px",marginBottom:"20px"}},"Vision"),n.createElement("div",null,"Transportation engineering is all about vehicles in motion, but transportation engineers and academics typically work with static diagrams. This site is an experiment in the idea that students learn the subject better when they can interact with moving representations. The course CEE 310 is taught every semester, so the page will be updated with new interactives as time goes on."),n.createElement("hr",null),n.createElement("div",{style:{fontSize:"24px",marginBottom:"20px",marginTop:"20px"}},"Team"),n.createElement("div",{className:t.person},n.createElement("div",{className:t.imgContainer},n.createElement("img",{src:$l,width:"200px"})),n.createElement("div",null,"Since Fall 2018, Lewis Lehe has been assistant professor in the transportation systems group of the Department of Civil and Environmental Engineering at UIUC. He earned a PhD and MS in CEE at UC Berkeley and an MA in Transport Economics at University of Leeds. His research focuses on the economics of downtown traffic. In a previous life, he made visualizations with"," ",n.createElement("a",{href:"https://www.google.com/search?client=firefox-b-1-d&q=vicapow"},"@vicapow")," ","under the ",n.createElement("a",{href:"http://setosa.io"},"Setosa")," name.",n.createElement("br",null),n.createElement("a",{href:"http://lewislehe.com"},"Home page")," (includes other visualizations)")),n.createElement("div",{className:t.person},n.createElement("div",{className:t.imgContainer},n.createElement("img",{src:Gl,width:"200px"})),n.createElement("div",null,"In Summer 2019, Negin Alemazkoor earned her PhD in Civil Engineering from UIUC. She is currently a Postdoctoral Research Associate in the Purdue School of Industrial Engineering. Her research mainly concerns developing computational tools for fast and reliable analysis of smart and resilient infrastructure systems with a focus on power and transportation systems.",n.createElement("br",null),n.createElement("a",{href:"https://nalemazkoor.wixsite.com/negin"},"Home page"))),n.createElement("div",{className:t.person},n.createElement("div",{className:t.imgContainer},n.createElement("img",{src:Xl,width:"200px"})),n.createElement("div",null,"Jesus holds an M.S. in Civil engineering and is currently pursuing Ph.D. in the Department of Civil and Environmental Engineering at the University of Illinois, Urbana-Champaign (UIUC). He is working as a research assistant in projects related to transportation systems evaluation, transit networks, intelligent transportation systems, highway safety, and previously traffic safety related to the application of Vision Zero principles. He attended to Valparaiso University prior to joining UIUC in 2017.")),n.createElement("div",{style:{fontSize:"24px",margin:"20px auto"}},"Tools"),n.createElement("div",{style:{marginBottom:"24px"}},"The site was created using React, d3, Material UI, TypeScript, Webpack, babel and Netlify."))}}(),rc={paddingRight:"15px"},nc=function(){var e=ic({});return n.createElement(n.Fragment,null,n.createElement("div",{className:e.title},n.createElement("div",{style:{flex:"1 1 auto"}}),n.createElement("div",{style:rc},n.createElement(s.rU,{to:"/"},"home")),n.createElement("div",{style:rc},n.createElement(oc,null)),n.createElement("div",{style:rc},n.createElement(s.rU,{to:"/about"},"about"))),n.createElement("div",{className:e.main},n.createElement(u.j3,null)))},ac=function(){return n.createElement(s.VK,null,n.createElement(u.Z5,null,n.createElement(u.AW,{path:"/",element:n.createElement(nc,null)},n.createElement(u.AW,{index:!0,element:n.createElement(ec,null)}),n.createElement(u.AW,{path:"/about",element:n.createElement(tc,null)}),n.createElement(u.AW,{path:"/construction-zone",element:n.createElement(bt,null)}),n.createElement(u.AW,{path:"/dilemma-zone",element:n.createElement(Pr,null)}),n.createElement(u.AW,{path:"/space-mean",element:n.createElement(Ci,null)}),n.createElement(u.AW,{path:"/horizontal",element:n.createElement(Dn,null)}),n.createElement(u.AW,{path:"/fundamental-diagram",element:n.createElement(fl,null)}),n.createElement(u.AW,{path:"/fundamental-diagrams",element:n.createElement(Ta,null)}),n.createElement(u.AW,{path:"/flow-and-density",element:n.createElement(bo,null)}),n.createElement(u.AW,{path:"/triangular2",element:n.createElement(Hl,null)}))))},oc=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(null),2),t=e[0],r=e[1],a=function(){r(null)};return n.createElement("div",null,n.createElement("div",{onClick:function(e){r(e.currentTarget)},style:{cursor:"pointer"}},"menu"),n.createElement(wo.Z,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a},Ql.map((function(e){return n.createElement(s.rU,{to:e[0],key:e[0]},n.createElement(So.Z,{onClick:a}," ",e[1]))}))))},ic=(0,c.Z)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif",color:o.Z[800],fontSize:"18px"},".katex":{fontSize:"15px"},text:{fontFamily:"Puritan, san-serif",fontSize:"13px"}},title:{backgroundColor:i.Z.A700,color:"white",width:"100%",height:"70px",display:"flex",fontFamily:"Helvetica",boxShadow:" 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",marginBottom:"15px",alignItems:"center",padding:"5px 30px",fontSize:"22px",boxSizing:"border-box","& a":{color:"white",textDecoration:"none"},"& a:hover":{color:l.Z[100],cursor:"pointer"}},main:{margin:"0 auto",marginTop:"30px",display:"flex",justifyContent:"center",flexDirection:"column"}}),lc=r(3457),cc=r(8357),sc=r(3259),uc=r(124),mc=(0,cc.Z)({palette:{primary:{main:sc.Z[500]},secondary:{main:uc.Z[500]}}}),fc=function(){return n.createElement(lc.Z,{theme:mc},n.createElement(ac,null))};(0,a.s)(document.getElementById("root")).render(n.createElement(fc,null))}},function(e){e.O(0,[418],(function(){return 8446,e(e.s=8446)})),e.O()}]);